{"dslabserviceresp":{"queryService":[],"bizvizWorkspace":"{\"reserv1\":null,\"reserv2\":null,\"reserv3\":null,\"reserv4\":null,\"reserv5\":null,\"createdDate\":1697475359200,\"isActive\":0,\"lastUpdatedDate\":null,\"active\":1,\"migrationId\":null,\"id\":1474560,\"name\":\"Tensorflow\",\"count\":null,\"parentId\":null,\"userId\":\"950278\",\"isFile\":false,\"infoJson\":\"{\\\"imageVersion\\\":\\\"8.0.41\\\",\\\"external_libraries\\\":\\\"Library1,library2\\\",\\\"imageName\\\":\\\"371194629034.dkr.ecr.ap-south-1.amazonaws.com/stg/dsnotebook-tensorflow\\\",\\\"confDetails\\\":{\\\"high\\\":{\\\"nonspark\\\":{\\\"request\\\":{\\\"memory\\\":\\\"2048Mi\\\",\\\"cpu\\\":\\\"1000m\\\"},\\\"limit\\\":{\\\"memory\\\":\\\"4048Mi\\\",\\\"cpu\\\":\\\"2500m\\\"}}},\\\"low\\\":{\\\"realtime\\\":{\\\"nonspark\\\":{\\\"request\\\":{\\\"memory\\\":\\\"1024Mi\\\",\\\"cpu\\\":\\\"500m\\\"},\\\"limit\\\":{\\\"memory\\\":\\\"1024Mi\\\",\\\"cpu\\\":\\\"1000m\\\"}}}},\\\"medium\\\":{\\\"nonspark\\\":{\\\"request\\\":{\\\"memory\\\":\\\"2048Mi\\\",\\\"cpu\\\":\\\"1000m\\\"},\\\"limit\\\":{\\\"memory\\\":\\\"4024Mi\\\",\\\"cpu\\\":\\\"1000m\\\"}}}},\\\"idle_shutdown\\\":\\\"1h\\\",\\\"apiImageVersion\\\":\\\"8.5.0\\\",\\\"appName\\\":\\\"tensorflow-pfnd\\\",\\\"git_project\\\":\\\"\\\",\\\"project_url\\\":\\\"vnshyamkrishnan/gitpush_jm\\\",\\\"project_name\\\":\\\"Tensorflow\\\",\\\"removedLibraries\\\":\\\"\\\",\\\"environment\\\":\\\"PythonTensorFlow\\\",\\\"project_description\\\":\\\"New\\\",\\\"Algorithms\\\":[\\\"Regression\\\",\\\"Classification\\\"],\\\"gpuLimit\\\":\\\"\\\",\\\"projectLabel\\\":\\\"\\\",\\\"resource_allocation\\\":\\\"medium\\\",\\\"configured_branch\\\":\\\"main\\\",\\\"apiImageName\\\":\\\"371194629034.dkr.ecr.ap-south-1.amazonaws.com/stg/dsmodelapi\\\",\\\"gpuType\\\":\\\"\\\",\\\"branchLabel\\\":\\\"\\\"}\",\"spaceKey\":\"1156\",\"type\":10,\"status\":1,\"contentJson\":\"[{\\\"queryservicename\\\":\\\"df_Test.txt\\\",\\\"id\\\":4063368,\\\"type\\\":\\\"Data Sandbox\\\",\\\"uuid\\\":\\\"11561697788432524\\\",\\\"extenstion\\\":\\\"txt\\\",\\\"fileType\\\":\\\"artifact\\\"},{\\\"queryservicename\\\":\\\"Test\\\",\\\"id\\\":4063367,\\\"type\\\":\\\"Data Sandbox\\\",\\\"uuid\\\":\\\"11561697788370591\\\",\\\"extenstion\\\":\\\"csv\\\",\\\"fileType\\\":\\\"\\\"},{\\\"queryservicename\\\":\\\"Mongo_Data\\\",\\\"id\\\":5701642,\\\"type\\\":\\\"Data Sets\\\",\\\"uuid\\\":\\\"11561697698830185\\\"},{\\\"queryservicename\\\":\\\"Dump_Data\\\",\\\"id\\\":4063316,\\\"type\\\":\\\"Data Sandbox\\\",\\\"uuid\\\":\\\"11561697699506508\\\",\\\"extenstion\\\":\\\"csv\\\",\\\"fileType\\\":\\\"\\\"},{\\\"queryservicename\\\":\\\"Null Issue_Prep\\\",\\\"id\\\":4063247,\\\"type\\\":\\\"Data Sandbox\\\",\\\"uuid\\\":\\\"11561697628478067\\\",\\\"extenstion\\\":\\\"csv\\\",\\\"fileType\\\":\\\"\\\"}]\",\"templateJson\":null,\"isShared\":null,\"updatedBy\":\"950278\",\"uuid\":\"11561697475359200\",\"createdUserName\":null}","envVariables":[],"utility":"[{\"migrationId\":null,\"id\":10321927,\"spaceKey\":\"1156\",\"name\":\"Tab\",\"description\":\"\",\"createdDate\":1698229331000,\"lastUpdatedDate\":1698229331000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"Tab.py\\\",\\\"filename\\\":\\\"Tab.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698229317786\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":10321926,\"spaceKey\":\"1156\",\"name\":\"Four spaces\",\"description\":\"\",\"createdDate\":1698229342000,\"lastUpdatedDate\":1698229342000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"4_spaces.py\\\",\\\"filename\\\":\\\"4_spaces.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698229308104\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":10321925,\"spaceKey\":\"1156\",\"name\":\"Two spaces\",\"description\":\"\",\"createdDate\":1698229354000,\"lastUpdatedDate\":1698229354000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"2_spaces.py\\\",\\\"filename\\\":\\\"2_spaces.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698229296594\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":8683585,\"spaceKey\":\"1156\",\"name\":\"Utility_test\",\"description\":\"\",\"createdDate\":1698228035000,\"lastUpdatedDate\":1698228035000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"Utility_test.py\\\",\\\"filename\\\":\\\"Utility_test.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698227695585\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":8683583,\"spaceKey\":\"1156\",\"name\":\"autoML_Regression_Preprocessing 1\",\"description\":\"\",\"createdDate\":1698227377000,\"lastUpdatedDate\":1698227377000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"autoML_Regression_Preprocessing 1.py\\\",\\\"filename\\\":\\\"autoML_Regression_Preprocessing 1.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698227273534\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":8683582,\"spaceKey\":\"1156\",\"name\":\"Sklearnworkflow_MountUpdate__1\",\"description\":\"from vcs imported file\",\"createdDate\":1698226923000,\"lastUpdatedDate\":1698226923000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"filename\\\":\\\"Sklearnworkflow_MountUpdate__1.py\\\",\\\"isImported\\\":1,\\\"last_modified_date\\\":\\\"2023-10-25T09:41:19.000+00:00\\\"}\",\"status\":1,\"completionStatus\":1,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698226923008\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":8683581,\"spaceKey\":\"1156\",\"name\":\"Utiity_script_V33\",\"description\":\"from vcs imported file\",\"createdDate\":1698227201000,\"lastUpdatedDate\":1698227201000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"Utiity_script_V33.py\\\",\\\"filename\\\":\\\"Utiity_script_V33.py\\\",\\\"isImported\\\":1,\\\"last_modified_date\\\":\\\"2023-10-18T04:59:30.000+00:00\\\"}\",\"status\":1,\"completionStatus\":1,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698226746743\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":8683580,\"spaceKey\":\"1156\",\"name\":\"Sklearnworkflow_MountUpdate__1_\",\"description\":\"from vcs imported file\",\"createdDate\":1698226472000,\"lastUpdatedDate\":1698226472000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"filename\\\":\\\"Sklearnworkflow_MountUpdate__1_.py\\\",\\\"isImported\\\":1,\\\"last_modified_date\\\":\\\"2023-10-13T05:15:14.000+00:00\\\"}\",\"status\":1,\"completionStatus\":1,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698226471637\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":8683573,\"spaceKey\":\"1156\",\"name\":\"Utiity_script_V31\",\"description\":\"from vcs imported file\",\"createdDate\":1698143222000,\"lastUpdatedDate\":1698143222000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"Utiity_script_V31.py\\\",\\\"filename\\\":\\\"Utiity_script_V31.py\\\",\\\"isImported\\\":1,\\\"last_modified_date\\\":\\\"2023-10-16T08:17:03.000+00:00\\\"}\",\"status\":1,\"completionStatus\":1,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698143175287\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":8683551,\"spaceKey\":\"1156\",\"name\":\"bug___test\",\"description\":\"\",\"createdDate\":1698128157000,\"lastUpdatedDate\":1698128157000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"linebreak Issue1.py\\\",\\\"filename\\\":\\\"linebreak Issue1.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561698128156944\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":4063386,\"spaceKey\":\"1156\",\"name\":\"bug_testtt\",\"description\":\"\",\"createdDate\":1697799884000,\"lastUpdatedDate\":1697799884000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"bug_test.py\\\",\\\"filename\\\":\\\"bug_test.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561697799883992\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":4063364,\"spaceKey\":\"1156\",\"name\":\"Utiity_script_V32\",\"description\":\"from vcs imported file\",\"createdDate\":1697787890000,\"lastUpdatedDate\":1697787890000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"Utiity_script_V32.py\\\",\\\"filename\\\":\\\"Utiity_script_V32.py\\\",\\\"isImported\\\":1,\\\"last_modified_date\\\":\\\"2023-10-19T10:37:48.000+00:00\\\"}\",\"status\":1,\"completionStatus\":1,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561697787877204\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":4063363,\"spaceKey\":\"1156\",\"name\":\"123\",\"description\":\"\",\"createdDate\":1697787726000,\"lastUpdatedDate\":1697787726000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"Test_script_29.py\\\",\\\"filename\\\":\\\"Test_script_29.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561697787468025\",\"fileType\":null,\"createdTime\":null},{\"migrationId\":null,\"id\":4063362,\"spaceKey\":\"1156\",\"name\":\"Test_script_28.py\",\"description\":\"\",\"createdDate\":1697787932000,\"lastUpdatedDate\":1697787932000,\"createdBy\":950278,\"updatedBy\":950278,\"properties\":\"{\\\"metadata\\\":\\\"Test_script_28.py\\\",\\\"filename\\\":\\\"Test_script_28.py\\\"}\",\"status\":1,\"completionStatus\":0,\"type\":\"py\",\"reference_id\":1474560,\"prepJson\":null,\"uuid\":\"11561697787272451\",\"fileType\":null,\"createdTime\":null}]","utilityContent":"{\"4063386\":\"I3Rlc3RpbmcgaW50ZW50YXRpb24gYnVnCgpjbGFzcyBQZXJzb25fVjc6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgYWdlKToKICAgICAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICAgICAgc2VsZi5hZ2UgPSBhZ2UgICAg\",\"4063364\":\"Y2xhc3MgUGVyc29uX1Y3OgogIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lLCBhZ2UpOgogICAgc2VsZi5uYW1lID0gbmFtZQogICAgc2VsZi5hZ2UgPSBhZ2UKCiAgZGVmIG15ZnVuYyhzZWxmKToKICAgIHByaW50KCJIZWxsbyBteSBuYW1lIGlzICIgKyBzZWxmLm5hbWUpCg==\",\"10321927\":\"IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiVW50aXRsZWQyNi5pcHluYgoKQXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgQ29sYWJvcmF0b3J5LgoKT3JpZ2luYWwgZmlsZSBpcyBsb2NhdGVkIGF0CiAgICBodHRwczovL2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20vZHJpdmUvMU0wcFJOdTh5RG03TlF1U2hZOW1YMXZmMXpSd20tMFhDCiIiIgoKZGVmIG5ldyhkZik6CiAgcHJpbnQoIjEiKQogIHJldHVybiBkZg==\",\"10321926\":\"IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiNCBzcGFjZXMuaXB5bmIKCkF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IENvbGFib3JhdG9yeS4KCk9yaWdpbmFsIGZpbGUgaXMgbG9jYXRlZCBhdAogICAgaHR0cHM6Ly9jb2xhYi5yZXNlYXJjaC5nb29nbGUuY29tL2RyaXZlLzFNMHBSTnU4eURtN05RdVNoWTltWDF2ZjF6UndtLTBYQwoiIiIKCmRlZiBuZXcoZGYpOgogICAgcHJpbnQoIjEiKQogICAgcmV0dXJuIGRm\",\"10321925\":\"IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiMiBzcGFjZXMuaXB5bmIKCkF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IENvbGFib3JhdG9yeS4KCk9yaWdpbmFsIGZpbGUgaXMgbG9jYXRlZCBhdAogICAgaHR0cHM6Ly9jb2xhYi5yZXNlYXJjaC5nb29nbGUuY29tL2RyaXZlLzFNMHBSTnU4eURtN05RdVNoWTltWDF2ZjF6UndtLTBYQwoiIiIKCmRlZiBuZXcoZGYpOgogIHRhYigpCiAgcmV0dXJuIGRm\",\"4063363\":\"IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiU2FtcGxlX3NjcmlwdCBmb3IgdGVzdGluZwoKQXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgQ29sYWJvcmF0b3J5LgoKT3JpZ2luYWwgZmlsZSBpcyBsb2NhdGVkIGF0CiAgICBodHRwczovL2NvbGFiLnJlc2VhcmNoLmdvb2dsZS5jb20vZHJpdmUvMTViNndzNEZwUVpJQVFQMFZJRHl3SFlWT3RvSjlIZEc2CiIiIgoKY2xhc3MgUGVyc29uMTIzNDoKICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgYWdlKToKICAgIHNlbGYubmFtZSA9IG5hbWUKICAgIHNlbGYuYWdlID0gYWdlCgogIGRlZiBteWZ1bmMoc2VsZik6CiAgICBwcmludCgiSGVsbG8gbXkgbmFtZSBpcyAiICsgc2VsZi5uYW1lKQ==\",\"4063362\":\"Y2xhc3MgUGVyc29uMToKICBkZWYgX19pbml0X18oc2VsZiwgbmFtZSwgYWdlKToKICAgIHNlbGYubmFtZSA9IG5hbWUKICAgIHNlbGYuYWdlID0gYWdlCgogIGRlZiBteWZ1bmMoc2VsZik6CiAgICBwcmludCgiSGVsbG8gbXkgbmFtZTogIiArIHNlbGYubmFtZSk=\",\"8683585\":\"ZnJvbSBpbyBpbXBvcnQgQnl0ZXNJTwpmcm9tIHRpbWUgaW1wb3J0IHBlcmZfY291bnRlcgppbXBvcnQgbG9nZ2luZwpsb2dnaW5nLmJhc2ljQ29uZmlnKCkKbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoJ01UQScpCmxvZ2dpbmdfbGV2ZWwgPSBsb2dnaW5nLkRFQlVHCmxvZ2dlci5zZXRMZXZlbChsb2dnaW5nX2xldmVsKQppbXBvcnQgYm90bzMKZnJvbSBib3RvY29yZS5leGNlcHRpb25zIGltcG9ydCBDbGllbnRFcnJvcgppbXBvcnQgcGFuZGFzIGFzIHBkCgpkZWYgZ2V0X2F0aGVuYV9jb25uZWN0aW9uKFJFR0lPTl9OQU1FLEFXU19BQ0NFU1NfS0VZX0lELEFXU19TRUNSRVRfQUNDRVNTX0tFWSk6CiAgICBwcmludCgiMSIpCiAgIAogICAgYXRoZW5hX2NsaWVudCA9IGJvdG8zLmNsaWVudCgKICAgICAgICAnYXRoZW5hJywgCiAgICAgICAgcmVnaW9uX25hbWU9UkVHSU9OX05BTUUsIAogICAgICAgIGF3c19hY2Nlc3Nfa2V5X2lkPUFXU19BQ0NFU1NfS0VZX0lELCAKICAgICAgICBhd3Nfc2VjcmV0X2FjY2Vzc19rZXk9QVdTX1NFQ1JFVF9BQ0NFU1NfS0VZCiAgICApCiAgICByZXR1cm4gYXRoZW5hX2NsaWVudAoKZGVmIHJ1bl9hdGhlbmFfcXVlcnkocXVlcnksIFJFR0lPTl9OQU1FLEFXU19BQ0NFU1NfS0VZX0lELEFXU19TRUNSRVRfQUNDRVNTX0tFWSxBVEhFTkFfREFUQUJBU0UsQVRIRU5BX1NUQVRVU19PVVRQVVRfTE9DQVRJT04sCiAgICAgICAgICAgICAgICAgICAgIFMzX1RBUkdFVF9CVUNLRVQsUzMpOgogICAgcHJpbnQoJ1N0YXJ0aW5nIEF0aGVuYSBxdWVyeSBydW4nKQogICAgbG9nZ2VyLmRlYnVnKCdDb25uZWN0aW5nIHRvIEF0aGVuYScpCiAgICBBVEhFTkFfQ0xJRU5UID0gZ2V0X2F0aGVuYV9jb25uZWN0aW9uKFJFR0lPTl9OQU1FLEFXU19BQ0NFU1NfS0VZX0lELEFXU19TRUNSRVRfQUNDRVNTX0tFWSkKICAgIGxvZ2dlci5kZWJ1ZyhmJ1N0YXJ0aW5nIEF0aGVuYSBxdWVyeSBleGVjdXRpb24nKQogICAgbG9nZ2VyLmRlYnVnKGYnQXRoZW5hIHF1ZXJ5Olxue3F1ZXJ5fScpCgogICAgcmVzcG9uc2UgPSBBVEhFTkFfQ0xJRU5ULnN0YXJ0X3F1ZXJ5X2V4ZWN1dGlvbigKICAgICAgICBRdWVyeVN0cmluZz1xdWVyeSwKICAgICAgICBRdWVyeUV4ZWN1dGlvbkNvbnRleHQ9eydEYXRhYmFzZSc6IEFUSEVOQV9EQVRBQkFTRX0sCiAgICAgICAgUmVzdWx0Q29uZmlndXJhdGlvbj17J091dHB1dExvY2F0aW9uJzogQVRIRU5BX1NUQVRVU19PVVRQVVRfTE9DQVRJT059CiAgICApCgogICAgIyBHZXQgdGhlIHF1ZXJ5IGV4ZWN1dGlvbiBJRAogICAgcXVlcnlfZXhlY3V0aW9uX2lkID0gcmVzcG9uc2VbJ1F1ZXJ5RXhlY3V0aW9uSWQnXQoKICAgICMgV2FpdCBmb3IgdGhlIHF1ZXJ5IHRvIGNvbXBsZXRlCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHF1ZXJ5X3N0YXR1cyA9IEFUSEVOQV9DTElFTlQuZ2V0X3F1ZXJ5X2V4ZWN1dGlvbihRdWVyeUV4ZWN1dGlvbklkPXF1ZXJ5X2V4ZWN1dGlvbl9pZCkKICAgICAgICBzdGF0dXMgPSBxdWVyeV9zdGF0dXNbJ1F1ZXJ5RXhlY3V0aW9uJ11bJ1N0YXR1cyddWydTdGF0ZSddCgogICAgICAgIGlmIHN0YXR1cyBpbiBbJ1NVQ0NFRURFRCcsICdGQUlMRUQnLCAnQ0FOQ0VMTEVEJ106CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgIyBSZXRyaWV2ZSBhbmQgcmV0dXJuIHRoZSBxdWVyeSByZXN1bHRzIGlmIHRoZSBxdWVyeSBzdWNjZWVkZWQKICAgIGlmIHN0YXR1cyA9PSAnU1VDQ0VFREVEJzoKIyAgICAgICAgIHJlc3VsdHMgPSBBVEhFTkFfQ0xJRU5ULmdldF9xdWVyeV9yZXN1bHRzKFF1ZXJ5RXhlY3V0aW9uSWQ9cXVlcnlfZXhlY3V0aW9uX2lkKQojICAgICAgICAgcmVzdWx0cyA9IGZvcm1hdF9hdGhlbmFfcmVzdWx0cyhyZXN1bHRzKQogICAgICAgIHMzX3Jlc3BvbnNlX29iamVjdCA9IFMzLmdldF9vYmplY3QoQnVja2V0PVMzX1RBUkdFVF9CVUNLRVQsIEtleT1mIntBVEhFTkFfU1RBVFVTX09VVFBVVF9MT0NBVElPTi5zcGxpdCgnLycpWy0yXX0ve3F1ZXJ5X2V4ZWN1dGlvbl9pZH0uY3N2IikKICAgICAgICBvYmplY3RfY29udGVudCA9IHMzX3Jlc3BvbnNlX29iamVjdFsnQm9keSddLnJlYWQoKQogICAgICAgIHJlc3VsdHMgPSBwZC5yZWFkX2NzdihCeXRlc0lPKG9iamVjdF9jb250ZW50KSkKICAgICAgICBsb2dnZXIuZGVidWcoZidBdGhlbmEgcXVlcnkgcmFuIHN1Y2Nlc3NmdWxseScpCiAgICAgICAgcmV0dXJuIHJlc3VsdHMKICAgIGVsaWYgc3RhdHVzID09ICdGQUlMRUQnOgogICAgICAgIHJhaXNlIEV4Y2VwdGlvbignUXVlcnkgZnJvbSBBdGhlbmEgZmFpbGVkJyk=\",\"8683573\":\"Y2xhc3MgUGVyc29uX05ldzE6CiAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIGFnZSk6CiAgICBzZWxmLm5hbWUgPSBuYW1lCiAgICBzZWxmLmFnZSA9IGFnZQoKICBkZWYgbXlmdW5jKHNlbGYpOgogICAgcHJpbnQoIkhlbGxvIG15IG5hbWUgaXMgIiArIHNlbGYubmFtZSkK\",\"8683551\":\"ZnJvbSBpbyBpbXBvcnQgQnl0ZXNJTwpmcm9tIHRpbWUgaW1wb3J0IHBlcmZfY291bnRlcgppbXBvcnQgbG9nZ2luZwpsb2dnaW5nLmJhc2ljQ29uZmlnKCkKbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoJ01UQScpCmxvZ2dpbmdfbGV2ZWwgPSBsb2dnaW5nLkRFQlVHCmxvZ2dlci5zZXRMZXZlbChsb2dnaW5nX2xldmVsKQppbXBvcnQgYm90bzMKZnJvbSBib3RvY29yZS5leGNlcHRpb25zIGltcG9ydCBDbGllbnRFcnJvcgppbXBvcnQgcGFuZGFzIGFzIHBkCgpkZWYgZ2V0X2F0aGVuYV9jb25uZWN0aW9uKFJFR0lPTl9OQU1FLEFXU19BQ0NFU1NfS0VZX0lELEFXU19TRUNSRVRfQUNDRVNTX0tFWSk6CiAgICBhdGhlbmFfY2xpZW50ID0gYm90bzMuY2xpZW50KAogICAgICAgICdhdGhlbmEnLCAKICAgICAgICByZWdpb25fbmFtZT1SRUdJT05fTkFNRSwgCiAgICAgICAgYXdzX2FjY2Vzc19rZXlfaWQ9QVdTX0FDQ0VTU19LRVlfSUQsIAogICAgICAgIGF3c19zZWNyZXRfYWNjZXNzX2tleT1BV1NfU0VDUkVUX0FDQ0VTU19LRVkKICAgICkKICAgIHJldHVybiBhdGhlbmFfY2xpZW50CgpkZWYgcnVuX2F0aGVuYV9xdWVyeShxdWVyeSwgUkVHSU9OX05BTUUsQVdTX0FDQ0VTU19LRVlfSUQsQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZLEFUSEVOQV9EQVRBQkFTRSxBVEhFTkFfU1RBVFVTX09VVFBVVF9MT0NBVElPTiwKICAgICAgICAgICAgICAgICAgICAgUzNfVEFSR0VUX0JVQ0tFVCxTMyk6CiAgICBwcmludCgnU3RhcnRpbmcgQXRoZW5hIHF1ZXJ5IHJ1bicpCiAgICBsb2dnZXIuZGVidWcoJ0Nvbm5lY3RpbmcgdG8gQXRoZW5hJykKICAgIEFUSEVOQV9DTElFTlQgPSBnZXRfYXRoZW5hX2Nvbm5lY3Rpb24oUkVHSU9OX05BTUUsQVdTX0FDQ0VTU19LRVlfSUQsQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKQogICAgbG9nZ2VyLmRlYnVnKGYnU3RhcnRpbmcgQXRoZW5hIHF1ZXJ5IGV4ZWN1dGlvbicpCiAgICBsb2dnZXIuZGVidWcoZidBdGhlbmEgcXVlcnk6XG57cXVlcnl9JykKCiAgICByZXNwb25zZSA9IEFUSEVOQV9DTElFTlQuc3RhcnRfcXVlcnlfZXhlY3V0aW9uKAogICAgICAgIFF1ZXJ5U3RyaW5nPXF1ZXJ5LAogICAgICAgIFF1ZXJ5RXhlY3V0aW9uQ29udGV4dD17J0RhdGFiYXNlJzogQVRIRU5BX0RBVEFCQVNFfSwKICAgICAgICBSZXN1bHRDb25maWd1cmF0aW9uPXsnT3V0cHV0TG9jYXRpb24nOiBBVEhFTkFfU1RBVFVTX09VVFBVVF9MT0NBVElPTn0KICAgICkKCiAgICAjIEdldCB0aGUgcXVlcnkgZXhlY3V0aW9uIElECiAgICBxdWVyeV9leGVjdXRpb25faWQgPSByZXNwb25zZVsnUXVlcnlFeGVjdXRpb25JZCddCgogICAgIyBXYWl0IGZvciB0aGUgcXVlcnkgdG8gY29tcGxldGUKICAgIHdoaWxlIFRydWU6CiAgICAgICAgcXVlcnlfc3RhdHVzID0gQVRIRU5BX0NMSUVOVC5nZXRfcXVlcnlfZXhlY3V0aW9uKFF1ZXJ5RXhlY3V0aW9uSWQ9cXVlcnlfZXhlY3V0aW9uX2lkKQogICAgICAgIHN0YXR1cyA9IHF1ZXJ5X3N0YXR1c1snUXVlcnlFeGVjdXRpb24nXVsnU3RhdHVzJ11bJ1N0YXRlJ10KCiAgICAgICAgaWYgc3RhdHVzIGluIFsnU1VDQ0VFREVEJywgJ0ZBSUxFRCcsICdDQU5DRUxMRUQnXToKICAgICAgICAgICAgYnJlYWsKICAgICAgICAjIFJldHJpZXZlIGFuZCByZXR1cm4gdGhlIHF1ZXJ5IHJlc3VsdHMgaWYgdGhlIHF1ZXJ5IHN1Y2NlZWRlZAogICAgaWYgc3RhdHVzID09ICdTVUNDRUVERUQnOgojICAgICAgICAgcmVzdWx0cyA9IEFUSEVOQV9DTElFTlQuZ2V0X3F1ZXJ5X3Jlc3VsdHMoUXVlcnlFeGVjdXRpb25JZD1xdWVyeV9leGVjdXRpb25faWQpCiMgICAgICAgICByZXN1bHRzID0gZm9ybWF0X2F0aGVuYV9yZXN1bHRzKHJlc3VsdHMpCiAgICAgICAgczNfcmVzcG9uc2Vfb2JqZWN0ID0gUzMuZ2V0X29iamVjdChCdWNrZXQ9UzNfVEFSR0VUX0JVQ0tFVCwgS2V5PWYie0FUSEVOQV9TVEFUVVNfT1VUUFVUX0xPQ0FUSU9OLnNwbGl0KCcvJylbLTJdfS97cXVlcnlfZXhlY3V0aW9uX2lkfS5jc3YiKQogICAgICAgIG9iamVjdF9jb250ZW50ID0gczNfcmVzcG9uc2Vfb2JqZWN0WydCb2R5J10ucmVhZCgpCiAgICAgICAgcmVzdWx0cyA9IHBkLnJlYWRfY3N2KEJ5dGVzSU8ob2JqZWN0X2NvbnRlbnQpKQogICAgICAgIGxvZ2dlci5kZWJ1ZyhmJ0F0aGVuYSBxdWVyeSByYW4gc3VjY2Vzc2Z1bGx5JykKICAgICAgICByZXR1cm4gcmVzdWx0cwogICAgZWxpZiBzdGF0dXMgPT0gJ0ZBSUxFRCc6CiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCdRdWVyeSBmcm9tIEF0aGVuYSBmYWlsZWQnKQ==\",\"8683583\":\"aW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBwYW5kYXMgYXMgcGQKCmZyb20gc2tsZWFybi5lbnNlbWJsZSBpbXBvcnQgUmFuZG9tRm9yZXN0UmVncmVzc29yCgpmcm9tIGxpZ2h0Z2JtIGltcG9ydCBMR0JNUmVncmVzc29yIGFzIGxnYm1yCgojIFByZXByb2Nlc3NpbmcgcGFja2FnZXMKI3ByaW50KCIxIikKZnJvbSBza2xlYXJuLmV4cGVyaW1lbnRhbCBpbXBvcnQgZW5hYmxlX2l0ZXJhdGl2ZV9pbXB1dGVyCmZyb20gc2tsZWFybi5waXBlbGluZSBpbXBvcnQgUGlwZWxpbmUKZnJvbSBza2xlYXJuLmltcHV0ZSBpbXBvcnQgU2ltcGxlSW1wdXRlcgpmcm9tIHNrbGVhcm4uaW1wdXRlIGltcG9ydCBJdGVyYXRpdmVJbXB1dGVyCmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCAqCgojIE1ldHJpY3MKZnJvbSBza2xlYXJuIGltcG9ydCBtZXRyaWNzCmZyb20gc2tsZWFybi5tZXRyaWNzIGltcG9ydCAqCgpmcm9tIHNrbGVhcm4uYmFzZSBpbXBvcnQgQmFzZUVzdGltYXRvciwgUmVncmVzc29yTWl4aW4sIFRyYW5zZm9ybWVyTWl4aW4KCmZyb20gcHlvZC5tb2RlbHMua25uIGltcG9ydCBLTk4KZnJvbSBweW9kLm1vZGVscy5pZm9yZXN0IGltcG9ydCBJRm9yZXN0CmZyb20gcHlvZC5tb2RlbHMucGNhIGltcG9ydCBQQ0EgYXMgUENBX29kCgpmcm9tIHNrbGVhcm4uY3Jvc3NfZGVjb21wb3NpdGlvbiBpbXBvcnQgUExTUmVncmVzc2lvbgoKcmFuZG9tX3N0YXRlID0gNDIKCmRlZiBjb21iKFgsIHBhaXJ3aXNlX2xpbmVhcj1GYWxzZSwgcGFpcndpc2VfcHJvZHVjdD1GYWxzZSk6CiAgICBmcm9tIGl0ZXJ0b29scyBpbXBvcnQgY29tYmluYXRpb25zCgogICAgWF9jb3B5ID0gWC5jb3B5KCkKICAgIGNvbHVtbnMgPSBbc3RyKGkpIGZvciBpIGluIFguY29sdW1uc10KICAgIFguY29sdW1ucyA9IGNvbHVtbnMKCiAgICBjb21iID0gY29tYmluYXRpb25zKGNvbHVtbnMsIDIpCgogICAgIyBQcmludCB0aGUgb2J0YWluZWQgY29tYmluYXRpb25zCiAgICBpZiBwYWlyd2lzZV9saW5lYXI6CiAgICAgICAgZm9yIGkgaW4gbGlzdChjb21iKToKICAgICAgICAgICAgYSA9IGlbMF0KICAgICAgICAgICAgYiA9IGlbMV0KICAgICAgICAgICAgY29sX25hbWVfYWRkID0gYSArICIrIiArIGIKICAgICAgICAgICAgWF9jb3B5W2NvbF9uYW1lX2FkZF0gPSBYW2FdICsgWFtiXQogICAgICAgICAgICBjb2xfbmFtZV9zdWIgPSBhICsgIi0iICsgYgogICAgICAgICAgICBYX2NvcHlbY29sX25hbWVfc3ViXSA9IFhbYV0gLSBYW2JdCgogICAgaWYgcGFpcndpc2VfcHJvZHVjdDoKICAgICAgICBjb21iID0gY29tYmluYXRpb25zKGNvbHVtbnMsIDIpCiAgICAgICAgIyBQcmludCB0aGUgb2J0YWluZWQgY29tYmluYXRpb25zCiAgICAgICAgZm9yIGkgaW4gbGlzdChjb21iKToKICAgICAgICAgICAgYSA9IGlbMF0KICAgICAgICAgICAgYiA9IGlbMV0KICAgICAgICAgICAgY29sX25hbWUgPSBhICsgIioiICsgYgogICAgICAgICAgICBYX2NvcHlbY29sX25hbWVdID0gWFthXSAqIFhbYl0KICAgIHJldHVybiBYX2NvcHkKCgpjbGFzcyBJbXB1dGVQcm9jZXNzb3I6CiAgICAiIiJJbXB1dGVyIGFuZCBPbmVIb3QvTGFiZWxFbmNvZGVyIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNhcmRpbmFsaXR5LCBsYWJlbF9lbmM9RmFsc2UpOgogICAgICAgIHNlbGYubGFiZWxfZW5jID0gbGFiZWxfZW5jCiAgICAgICAgc2VsZi5jYXJkaW5hbGl0eSA9IGNhcmRpbmFsaXR5CgogICAgZGVmIGZpdChzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIHNlbGYuY2hhbmdlZF9jb2x1bW5zID0gW3N0cihpKSBmb3IgaSBpbiBYLmNvbHVtbnNdCiAgICAgICAgWC5jb2x1bW5zID0gc2VsZi5jaGFuZ2VkX2NvbHVtbnMKICAgICAgICBjYXRlZ29yaWNhbF9jb2xzID0gWwogICAgICAgICAgICBjbmFtZQogICAgICAgICAgICBmb3IgY25hbWUgaW4gWC5jb2x1bW5zCiAgICAgICAgICAgIGlmIFhbY25hbWVdLm51bmlxdWUoKSA8IHNlbGYuY2FyZGluYWxpdHkgYW5kIFhbY25hbWVdLmR0eXBlID09ICJvYmplY3QiCiAgICAgICAgXQogICAgICAgIG51bWVyaWNhbF9jb2xzID0gWwogICAgICAgICAgICBjbmFtZSBmb3IgY25hbWUgaW4gWC5jb2x1bW5zIGlmIFhbY25hbWVdLmR0eXBlIGluIFsiaW50NjQiLCAiZmxvYXQ2NCJdCiAgICAgICAgXQogICAgICAgIG15X2NvbHMgPSBjYXRlZ29yaWNhbF9jb2xzICsgbnVtZXJpY2FsX2NvbHMKCiAgICAgICAgc2VsZi5jYXRlZ29yaWNhbF9jb2xzID0gY2F0ZWdvcmljYWxfY29scwogICAgICAgIHNlbGYubnVtZXJpY2FsX2NvbHMgPSBudW1lcmljYWxfY29scwogICAgICAgIHNlbGYubXlfY29scyA9IG15X2NvbHMKCiAgICAgICAgWCA9IFhbbXlfY29sc10uY29weSgpCgogICAgICAgIGltcHV0ZXJfbnVtID0gU2ltcGxlSW1wdXRlcihzdHJhdGVneT0iY29uc3RhbnQiKQogICAgICAgIFhfZHVtID0gaW1wdXRlcl9udW0uZml0X3RyYW5zZm9ybShYW3NlbGYubnVtZXJpY2FsX2NvbHNdKQogICAgICAgIHNlbGYuaW1wdXRlcl9udW0gPSBpbXB1dGVyX251bQoKICAgICAgICBpZiBzZWxmLmNhdGVnb3JpY2FsX2NvbHM6CiAgICAgICAgICAgIGltcHV0ZXJfY2F0ID0gU2ltcGxlSW1wdXRlcihzdHJhdGVneT0ibW9zdF9mcmVxdWVudCIpCiAgICAgICAgICAgIFhfY2F0ID0gaW1wdXRlcl9jYXQuZml0X3RyYW5zZm9ybShYW3NlbGYuY2F0ZWdvcmljYWxfY29sc10pCiAgICAgICAgICAgIHNlbGYuaW1wdXRlcl9jYXQgPSBpbXB1dGVyX2NhdAoKICAgICAgICAgICAgaWYgbm90IHNlbGYubGFiZWxfZW5jOgogICAgICAgICAgICAgICAgT2hlID0gT25lSG90RW5jb2RlcihoYW5kbGVfdW5rbm93bj0iaWdub3JlIikKICAgICAgICAgICAgICAgIE9oZS5maXQoWF9jYXQpCiAgICAgICAgICAgICAgICBzZWxmLk9oZSA9IE9oZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgT3JkRW5jID0gT3JkaW5hbEVuY29kZXIoaGFuZGxlX3Vua25vd249InVzZV9lbmNvZGVkX3ZhbHVlIiwgdW5rbm93bl92YWx1ZT1ucC5uYW4pCiAgICAgICAgICAgICAgICBYX2NhdCA9IE9yZEVuYy5maXQoWF9jYXQpCiAgICAgICAgICAgICAgICBzZWxmLk9yZEVuYyA9IE9yZEVuYwoKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiB0cmFuc2Zvcm0oc2VsZiwgWCwgeT1Ob25lKToKICAgICAgICBYLmNvbHVtbnMgPSBzZWxmLmNoYW5nZWRfY29sdW1ucwogICAgICAgIFhfbnVtID0gcGQuRGF0YUZyYW1lKAogICAgICAgICAgICBkYXRhPXNlbGYuaW1wdXRlcl9udW0udHJhbnNmb3JtKFhbc2VsZi5udW1lcmljYWxfY29sc10pLAogICAgICAgICAgICBjb2x1bW5zPXNlbGYubnVtZXJpY2FsX2NvbHMsCiAgICAgICAgKS5hc3R5cGUoImZsb2F0MzIiKQogICAgICAgIGlmIHNlbGYuY2F0ZWdvcmljYWxfY29sczoKICAgICAgICAgICAgaWYgbm90IHNlbGYubGFiZWxfZW5jOgogICAgICAgICAgICAgICAgWF9jYXQgPSBwZC5EYXRhRnJhbWUoCiAgICAgICAgICAgICAgICAgICAgZGF0YT1zZWxmLk9oZS50cmFuc2Zvcm0oCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW1wdXRlcl9jYXQudHJhbnNmb3JtKFhbc2VsZi5jYXRlZ29yaWNhbF9jb2xzXSkKICAgICAgICAgICAgICAgICAgICApLnRvYXJyYXkoKSwKICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXNlbGYuT2hlLmdldF9mZWF0dXJlX25hbWVzKAogICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF9mZWF0dXJlcz1zZWxmLmNhdGVnb3JpY2FsX2NvbHMKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZGF0YSA9IHBkLmNvbmNhdChbWF9jYXQsIFhfbnVtXSwgYXhpcz0xKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgWF9jYXQgPSBwZC5EYXRhRnJhbWUoCiAgICAgICAgICAgICAgICAgICAgc2VsZi5PcmRFbmMudHJhbnNmb3JtKAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmltcHV0ZXJfY2F0LnRyYW5zZm9ybShYW3NlbGYuY2F0ZWdvcmljYWxfY29sc10pCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXNlbGYuY2F0ZWdvcmljYWxfY29scywKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGRhdGEgPSBwZC5jb25jYXQoW1hfY2F0LnJlc2V0X2luZGV4KGRyb3A9VHJ1ZSksIFhfbnVtXSwgYXhpcz0xKQoKICAgICAgICBlbHNlOgogICAgICAgICAgICBkYXRhID0gWF9udW0KCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgZml0X3RyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIHJldHVybiBzZWxmLmZpdChYKS50cmFuc2Zvcm0oWCkKCgpjbGFzcyBJdGVyYXRpdmVfSW1wdXRlcihCYXNlRXN0aW1hdG9yLCBUcmFuc2Zvcm1lck1peGluKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByYW5kb21fc3RhdGUpOgogICAgICAgICMgQ2FuIGJlIGN1c3RvbWl6ZWQgdG8gaW5sY3VkZSBhbGwgYXJndW1lbnRzIGZyb20gSXRlcmF0aXZlSW1wdXRlcgogICAgICAgIHNlbGYuaW1wX21lYW4gPSBJdGVyYXRpdmVJbXB1dGVyKHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUpCgogICAgZGVmIGZpdChzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIHNlbGYuaW1wX21lYW4uZml0KFgpCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgWF90cmFucyA9IHNlbGYuaW1wX21lYW4udHJhbnNmb3JtKFgpCiAgICAgICAgWF90ciA9IHBkLkRhdGFGcmFtZShYX3RyYW5zLCBjb2x1bW5zPVguY29sdW1ucykKICAgICAgICByZXR1cm4gWF90cgoKICAgIGRlZiBmaXRfdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgcmV0dXJuIHNlbGYuZml0KFgpLnRyYW5zZm9ybShYKQoKCmNsYXNzIEZlYXR1cmVTZWxlY3RvcihCYXNlRXN0aW1hdG9yLCBUcmFuc2Zvcm1lck1peGluKToKICAgICIiIgogICAgUmFuZG9tIEZvcmVzdC9MaWdodEdCTS9Db3JyZWxhdGlvbiBiYXNlZCBmZWF0dXJlIHNlbGVjdGlvbi4KICAgICIiIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICAgICAgc2VsZiwKICAgICAgICAgICAgcmY9VHJ1ZSwKICAgICAgICAgICAgbl9lc3RpbWF0b3JzPTEwMCwKICAgICAgICAgICAgcmZfY29scz0yMCwKICAgICAgICAgICAgbGdibXI9RmFsc2UsCiAgICAgICAgICAgIGNvcnI9RmFsc2UsCiAgICAgICAgICAgIGNvcnJfY29scz0yMCwKICAgICAgICAgICAgY29ycl90aHJlcz0wLjIsCiAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUsCiAgICApOgogICAgICAgIHNlbGYubl9lc3RpbWF0b3JzID0gbl9lc3RpbWF0b3JzCiAgICAgICAgc2VsZi5yZiA9IHJmCiAgICAgICAgc2VsZi5yZl9jb2xzID0gcmZfY29scwogICAgICAgIHNlbGYubGdibXIgPSBsZ2JtcgogICAgICAgIHNlbGYuY29yciA9IGNvcnIKICAgICAgICBzZWxmLmNvcnJfY29scyA9IGNvcnJfY29scwogICAgICAgIHNlbGYuY29ycl90aHJlcyA9IGNvcnJfdGhyZXMKICAgICAgICBzZWxmLnJhbmRvbV9zdGF0ZSA9IHJhbmRvbV9zdGF0ZQoKICAgIGRlZiBmaXQoc2VsZiwgWCwgeSk6CiAgICAgICAgaWYgc2VsZi5yZjoKICAgICAgICAgICAgbWF4X2ZlYXR1cmVzID0gbWluKDcwLCBpbnQobnAuc3FydChsZW4oWC5jb2x1bW5zKSkpKQogICAgICAgICAgICBtYXhfc2FtcGxlcyA9IG1pbigxMDAwLCBpbnQobnAuc3FydChsZW4oWCkpKSkKICAgICAgICAgICAgcmYgPSBSYW5kb21Gb3Jlc3RSZWdyZXNzb3IoCiAgICAgICAgICAgICAgICBzZWxmLm5fZXN0aW1hdG9ycywKICAgICAgICAgICAgICAgIG1heF9mZWF0dXJlcz1tYXhfZmVhdHVyZXMsCiAgICAgICAgICAgICAgICBtYXhfc2FtcGxlcz1tYXhfc2FtcGxlcywKICAgICAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1zZWxmLnJhbmRvbV9zdGF0ZSwKICAgICAgICAgICAgICAgIG5fam9icz0tMSwKICAgICAgICAgICAgKQogICAgICAgICAgICByZi5maXQoWCwgeSkKCiAgICAgICAgICAgIGltcG9ydGFuY2VfcmYgPSByZi5mZWF0dXJlX2ltcG9ydGFuY2VzXwogICAgICAgICAgICBkZl9yZl9pbXBvcnRhbmNlID0gcGQuRGF0YUZyYW1lKAogICAgICAgICAgICAgICAgaW1wb3J0YW5jZV9yZiwgaW5kZXg9WC5jb2x1bW5zLCBjb2x1bW5zPVsiaW1wb3J0YW5jZSJdCiAgICAgICAgICAgICkKICAgICAgICAgICAgaW1wb3J0YW5jZV9yZl9zb3J0ZWQgPSBkZl9yZl9pbXBvcnRhbmNlLnNvcnRfdmFsdWVzKAogICAgICAgICAgICAgICAgYnk9WyJpbXBvcnRhbmNlIl0sIGFzY2VuZGluZz1GYWxzZQogICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYucmZfY29sdW1ucyA9IGltcG9ydGFuY2VfcmZfc29ydGVkLmluZGV4WwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYucmZfY29scwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdICAjIENvbHVtbnMgZnJvbSBSRgoKICAgICAgICBpZiBzZWxmLmxnYm1yOgogICAgICAgICAgICBtYXhfc2EgPSBtaW4oZmxvYXQoMTAwMCAvIGxlbihYKSksIGZsb2F0KG5wLnNxcnQobGVuKFgpIC8gbGVuKFgpKSkpCiAgICAgICAgICAgIG0gPSBsZ2JtcigKICAgICAgICAgICAgICAgIG5fZXN0aW1hdG9ycz0xMDAsCiAgICAgICAgICAgICAgICBtYXhfZGVwdGg9NSwKICAgICAgICAgICAgICAgIG5fam9icz0tMSwKICAgICAgICAgICAgICAgIHN1YnNhbXBsZT1tYXhfc2EsCiAgICAgICAgICAgICAgICByYW5kb21fc3RhdGU9c2VsZi5yYW5kb21fc3RhdGUsCiAgICAgICAgICAgICkKICAgICAgICAgICAgbS5maXQoWCwgeSkKCiAgICAgICAgICAgIGltcG9ydGFuY2VfbGdibXIgPSBtLmZlYXR1cmVfaW1wb3J0YW5jZXNfCiAgICAgICAgICAgIGRmX2xnYm1yX2ltcG9ydGFuY2UgPSBwZC5EYXRhRnJhbWUoCiAgICAgICAgICAgICAgICBpbXBvcnRhbmNlX2xnYm1yLCBpbmRleD1YLmNvbHVtbnMsIGNvbHVtbnM9WyJpbXBvcnRhbmNlIl0KICAgICAgICAgICAgKQogICAgICAgICAgICBpbXBvcnRhbmNlX2xnYm1yX3NvcnRlZCA9IGRmX2xnYm1yX2ltcG9ydGFuY2Uuc29ydF92YWx1ZXMoCiAgICAgICAgICAgICAgICBieT1bImltcG9ydGFuY2UiXSwgYXNjZW5kaW5nPUZhbHNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5sZ2Jtcl9jb2x1bW5zID0gaW1wb3J0YW5jZV9sZ2Jtcl9zb3J0ZWQuaW5kZXhbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5yZl9jb2xzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gICMgQ29sdW1ucyBmcm9tIFJGCgogICAgICAgIGlmIHNlbGYuY29ycjoKICAgICAgICAgICAgZnVsbF9kYXRhID0gcGQuY29uY2F0KFtYLCB5LnJlc2V0X2luZGV4KGRyb3A9VHJ1ZSldLCBheGlzPTEpCiAgICAgICAgICAgIHNlbGVjdGVkX2NvbHVtbnMgPSAoCiAgICAgICAgICAgICAgICBmdWxsX2RhdGEuY29ycigpCiAgICAgICAgICAgICAgICAuaWxvY1s6LCAtMV1bCiAgICAgICAgICAgICAgICAgICAgbnAubG9naWNhbF9vcigKICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bGxfZGF0YS5jb3JyKCkuaWxvY1s6LCAtMV0gPiBzZWxmLmNvcnJfdGhyZXMpLAogICAgICAgICAgICAgICAgICAgICAgICAoZnVsbF9kYXRhLmNvcnIoKS5pbG9jWzosIC0xXSA8IC1zZWxmLmNvcnJfdGhyZXMpLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIC5pbmRleAogICAgICAgICAgICApCiAgICAgICAgICAgIGNvcnJfY29scyA9IG1pbigKICAgICAgICAgICAgICAgIHNlbGYuY29ycl9jb2xzLCBsZW4oc2VsZWN0ZWRfY29sdW1ucykgLSAxCiAgICAgICAgICAgICkgICMgQ29sdW1ucyBmcm9tIENvcnIKICAgICAgICAgICAgc2VsZi5jb3JyX2NvbHVtbnMgPSBzZWxlY3RlZF9jb2x1bW5zWzpjb3JyX2NvbHNdCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgaWYgc2VsZi5yZiBhbmQgc2VsZi5jb3JyIGFuZCBzZWxmLmxnYm1yOgogICAgICAgICAgICBjb2x1bW5zID0gc2V0KAogICAgICAgICAgICAgICAgbGlzdChzZWxmLnJmX2NvbHVtbnMpCiAgICAgICAgICAgICAgICArIGxpc3Qoc2VsZi5sZ2Jtcl9jb2x1bW5zKQogICAgICAgICAgICAgICAgKyBsaXN0KHNlbGYuY29ycl9jb2x1bW5zKQogICAgICAgICAgICApCgogICAgICAgIGVsaWYgc2VsZi5yZiBhbmQgc2VsZi5sZ2JtcjoKICAgICAgICAgICAgY29sdW1ucyA9IHNldChsaXN0KHNlbGYucmZfY29sdW1ucykgKyBsaXN0KHNlbGYubGdibXJfY29sdW1ucykpCgogICAgICAgIGVsaWYgc2VsZi5yZjoKICAgICAgICAgICAgY29sdW1ucyA9IHNldChsaXN0KHNlbGYucmZfY29sdW1ucykpCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbHVtbnMgPSBzZWxmLmNvcnJfY29sdW1ucwoKICAgICAgICByZXR1cm4gWFtjb2x1bW5zXQoKICAgIGRlZiBmaXRfdHJhbnNmb3JtKHNlbGYsIFgsIHkpOgogICAgICAgIHJldHVybiBzZWxmLmZpdChYLCB5KS50cmFuc2Zvcm0oWCkKCgpjbGFzcyBGZWF0dXJlR2VuZXJhdG9yKEJhc2VFc3RpbWF0b3IsIFRyYW5zZm9ybWVyTWl4aW4pOgogICAgIiIiCiAgICBHZW5lcmF0ZXMgZmVhdHVyZXMgdXNpbmcgZGlmZmVyZW50IHRlY2huaXF1ZXMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgIGludGVyYWN0aW9uX29ubHk9RmFsc2UsCiAgICAgICAgICAgIHBvbHlub21pYWxfZmVhdHVyZXM9RmFsc2UsCiAgICAgICAgICAgIHBhaXJ3aXNlX2xpbmVhcj1GYWxzZSwKICAgICAgICAgICAgcGFpcndpc2VfcHJvZHVjdD1GYWxzZSwKICAgICk6CiAgICAgICAgc2VsZi5wb2x5bm9taWFsX2ZlYXR1cmVzID0gcG9seW5vbWlhbF9mZWF0dXJlcwogICAgICAgIHNlbGYuaW50ZXJhY3Rpb25fb25seSA9IGludGVyYWN0aW9uX29ubHkKICAgICAgICBzZWxmLnBhaXJ3aXNlX2xpbmVhciA9IHBhaXJ3aXNlX2xpbmVhcgogICAgICAgIHNlbGYucGFpcndpc2VfcHJvZHVjdCA9IHBhaXJ3aXNlX3Byb2R1Y3QKCiAgICBkZWYgZml0KHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgaWYgc2VsZi5pbnRlcmFjdGlvbl9vbmx5OgogICAgICAgICAgICBzZWxmLmludGVyYWN0aW9uID0gUG9seW5vbWlhbEZlYXR1cmVzKDIsIGludGVyYWN0aW9uX29ubHk9VHJ1ZSkKICAgICAgICAgICAgc2VsZi5pbnRlcmFjdGlvbi5maXQoWCkKCiAgICAgICAgZWxpZiBzZWxmLnBvbHlub21pYWxfZmVhdHVyZXM6CiAgICAgICAgICAgIHNlbGYucG9seSA9IFBvbHlub21pYWxGZWF0dXJlcygyKQogICAgICAgICAgICBzZWxmLnBvbHkuZml0KFgpCgogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIHRyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOgoKICAgICAgICBpZiBzZWxmLmludGVyYWN0aW9uX29ubHk6CiAgICAgICAgICAgIFhfZ2VuID0gcGQuRGF0YUZyYW1lKAogICAgICAgICAgICAgICAgZGF0YT1zZWxmLmludGVyYWN0aW9uLnRyYW5zZm9ybShYKSwKICAgICAgICAgICAgICAgIGNvbHVtbnM9c2VsZi5pbnRlcmFjdGlvbi5nZXRfZmVhdHVyZV9uYW1lcyhYLmNvbHVtbnMpLAogICAgICAgICAgICApCgogICAgICAgIGVsaWYgc2VsZi5wb2x5bm9taWFsX2ZlYXR1cmVzOgogICAgICAgICAgICBYX2dlbiA9IHBkLkRhdGFGcmFtZSgKICAgICAgICAgICAgICAgIGRhdGE9c2VsZi5wb2x5LnRyYW5zZm9ybShYKSwKICAgICAgICAgICAgICAgIGNvbHVtbnM9c2VsZi5wb2x5LmdldF9mZWF0dXJlX25hbWVzKFguY29sdW1ucyksCiAgICAgICAgICAgICkKCiAgICAgICAgZWxpZiBzZWxmLnBhaXJ3aXNlX2xpbmVhciBvciBzZWxmLnBhaXJ3aXNlX3Byb2R1Y3Q6CiAgICAgICAgICAgIFhfZ2VuID0gY29tYigKICAgICAgICAgICAgICAgIFg9WCwKICAgICAgICAgICAgICAgIHBhaXJ3aXNlX2xpbmVhcj1zZWxmLnBhaXJ3aXNlX2xpbmVhciwKICAgICAgICAgICAgICAgIHBhaXJ3aXNlX3Byb2R1Y3Q9c2VsZi5wYWlyd2lzZV9wcm9kdWN0LAogICAgICAgICAgICApCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIFhfZ2VuID0gWAoKICAgICAgICByZXR1cm4gWF9nZW4KCiAgICBkZWYgZml0X3RyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIHJldHVybiBzZWxmLmZpdChYKS50cmFuc2Zvcm0oWCkKCgpjbGFzcyBPdXRsaWVyKEJhc2VFc3RpbWF0b3IsIFRyYW5zZm9ybWVyTWl4aW4pOgogICAgIiIiCiAgICAtIFJlbW92ZXMgb3V0bGllciB1c2luZyBBQk9ELEtOTixJRk8sUENBICYgSE9CUyB1c2luZyBoYXJkIHZvdGluZwogICAgLSBPbmx5IHRha2VzIG51bWVyaWNhbCAvIE9uZSBIb3QgRW5jb2RlZCBmZWF0dXJlcwogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgICAgICBzZWxmLCBjb250YW1pbmF0aW9uPTAuMjAsIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUsIG1ldGhvZHM9WyJrbm4iLCAiaXNvIiwgInBjYSJdCiAgICApOgogICAgICAgIHNlbGYuY29udGFtaW5hdGlvbiA9IGNvbnRhbWluYXRpb24KICAgICAgICBzZWxmLnJhbmRvbV9zdGF0ZSA9IHJhbmRvbV9zdGF0ZQogICAgICAgIHNlbGYubWV0aG9kcyA9IG1ldGhvZHMKCiAgICBkZWYgZml0KHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgc2VsZi5maXRfdHJhbnNmb3JtKFgsIHk9eSkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiB0cmFuc2Zvcm0oc2VsZiwgWCwgeT1Ob25lKToKICAgICAgICByZXR1cm4gWAoKICAgIGRlZiBmaXRfdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgZGF0YXNldCA9IFguY29weSgpCiAgICAgICAgIyBkdW1taWZ5IGlmIHRoZXJlIGFyZSBhbnkgb2JlY3RzCiAgICAgICAgaWYgbGVuKGRhdGFzZXQuc2VsZWN0X2R0eXBlcyhpbmNsdWRlPSJvYmplY3QiKS5jb2x1bW5zKSA+IDA6CiAgICAgICAgICAgIHNlbGYuZHVtbXkgPSBEdW1taWZ5KHkpCiAgICAgICAgICAgIGRhdGEgPSBzZWxmLmR1bW15LmZpdF90cmFuc2Zvcm0oWCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkYXRhID0gWAoKICAgICAgICBkYXRhX3dpdGhvdXRfdGFyZ2V0ID0gZGF0YQoKICAgICAgICBpZiAia25uIiBpbiBzZWxmLm1ldGhvZHM6CiAgICAgICAgICAgIHNlbGYua25uID0gS05OKGNvbnRhbWluYXRpb249c2VsZi5jb250YW1pbmF0aW9uKQogICAgICAgICAgICBzZWxmLmtubi5maXQoZGF0YV93aXRob3V0X3RhcmdldCkKICAgICAgICAgICAga25uX3ByZWRpY3QgPSBzZWxmLmtubi5wcmVkaWN0KGRhdGFfd2l0aG91dF90YXJnZXQpCiAgICAgICAgICAgIGRhdGFfd2l0aG91dF90YXJnZXRbImtubiJdID0ga25uX3ByZWRpY3QKCiAgICAgICAgaWYgImlzbyIgaW4gc2VsZi5tZXRob2RzOgogICAgICAgICAgICBzZWxmLmlzbyA9IElGb3Jlc3QoCiAgICAgICAgICAgICAgICBjb250YW1pbmF0aW9uPXNlbGYuY29udGFtaW5hdGlvbiwKICAgICAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1zZWxmLnJhbmRvbV9zdGF0ZSwKICAgICAgICAgICAgICAgIGJlaGF2aW91cj0ibmV3IiwKICAgICAgICAgICAgKQogICAgICAgICAgICBzZWxmLmlzby5maXQoZGF0YV93aXRob3V0X3RhcmdldCkKICAgICAgICAgICAgaXNvX3ByZWRpY3QgPSBzZWxmLmlzby5wcmVkaWN0KGRhdGFfd2l0aG91dF90YXJnZXQpCiAgICAgICAgICAgIGRhdGFfd2l0aG91dF90YXJnZXRbImlzbyJdID0gaXNvX3ByZWRpY3QKCiAgICAgICAgaWYgInBjYSIgaW4gc2VsZi5tZXRob2RzOgogICAgICAgICAgICBzZWxmLnBjYSA9IFBDQV9vZCgKICAgICAgICAgICAgICAgIGNvbnRhbWluYXRpb249c2VsZi5jb250YW1pbmF0aW9uLCByYW5kb21fc3RhdGU9c2VsZi5yYW5kb21fc3RhdGUKICAgICAgICAgICAgKQogICAgICAgICAgICBzZWxmLnBjYS5maXQoZGF0YV93aXRob3V0X3RhcmdldCkKICAgICAgICAgICAgcGNhX3ByZWRpY3QgPSBzZWxmLnBjYS5wcmVkaWN0KGRhdGFfd2l0aG91dF90YXJnZXQpCiAgICAgICAgICAgIGRhdGFfd2l0aG91dF90YXJnZXRbInBjYSJdID0gcGNhX3ByZWRpY3QKCiAgICAgICAgZGF0YV93aXRob3V0X3RhcmdldFsidm90ZV9vdXRsaWVyIl0gPSBkYXRhX3dpdGhvdXRfdGFyZ2V0W3NlbGYubWV0aG9kc10uc3VtKAogICAgICAgICAgICBheGlzPTEKICAgICAgICApCgogICAgICAgIHNlbGYub3V0bGllcnMgPSBkYXRhX3dpdGhvdXRfdGFyZ2V0WwogICAgICAgICAgICBkYXRhX3dpdGhvdXRfdGFyZ2V0WyJ2b3RlX291dGxpZXIiXSA9PSBsZW4oc2VsZi5tZXRob2RzKQogICAgICAgICAgICBdLmluZGV4CgogICAgICAgIHJldHVybiBkYXRhc2V0W35kYXRhc2V0LmluZGV4LmlzaW4oc2VsZi5vdXRsaWVycyldCgoKY2xhc3MgWmVyb19OZWFyWmVyb19WYXJpYW5jZShCYXNlRXN0aW1hdG9yLCBUcmFuc2Zvcm1lck1peGluKToKICAgICIiIgogICAgLSBpdCBlbGltaW5hdGVzIHRoZSBmZWF0dXJlcyBoYXZpbmcgemVybyB2YXJpYW5jZQogICAgLSBpdCBlbGltaW5hdGVzIHRoZSBmZWF0dXJlcyBoYXZlaW5nIG5lYXIgemVybyB2YXJpYW5jZQogICAgLSBOZWFyIHplcm8gdmFyaWFuY2UgaXMgZGV0ZXJtaW5lZCBieQogICAgICAtMSkgQ291bnQgb2YgdW5pcXVlIHBvaW50cyBkaXZpZGVkIGJ5IHRoZSB0b3RhbCBsZW5ndGggb2YgdGhlIGZlYXR1cmUgaGFzIHRvIGJlIGxvd2VyIHRoYW4gYSBwcmUgc2VwY2lmaWVkIHRocmVzaG9sZAogICAgICAtMikgTW9zdCBjb21tb24gcG9pbnQoY291bnQpIGRpdmlkZWQgYnkgdGhlIHNlY29uZCBtb3N0IGNvbW1vbiBwb2ludChjb3VudCkgaW4gdGhlIGZlYXR1cmUgaXMgZ3JlYXRlciB0aGFuIGEgcHJlIHNwZWNpZmllZCB0aHJlc2hvbGQKICAgICAgT25jZSBib3RoIGNvbmRpdGlvbnMgYXJlIG1ldCAsIHRoZSBmZWF0dXJlIGlzIGRyb3BwZWQKICAgIC1JZ25vcmVzIHRhcmdldCB2YXJpYWJsZQoKICAgICAgQXJnczoKICAgICAgICB0aHJlc2hvbGRfMTogZmxvYXQgKGJldHdlZW4gMC4wIHRvIDEuMCkgLCBkZWZhdWx0IGlzIC4xMAogICAgICAgIHRocmVzaG9sZF8yOiBpbnQgKGJldHdlZW4gMSB0byAxMDApLCBkZWZhdWx0IGlzIDIwCiAgICAgICAgdGF0Z2V0IHZhcmlhYmxlIDogc3RyaW5nLCBuYW1lIG9mIHRoZSB0YXJnZXQgdmFyaWFibGUKCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgdGhyZXNob2xkXzE9MC4xLCB0aHJlc2hvbGRfMj0yMCk6CiAgICAgICAgc2VsZi50aHJlc2hvbGRfMSA9IHRocmVzaG9sZF8xCiAgICAgICAgc2VsZi50aHJlc2hvbGRfMiA9IHRocmVzaG9sZF8yCgogICAgZGVmIGZpdCgKICAgICAgICAgICAgc2VsZiwgWCwgeT1Ob25lCiAgICApOiAgIyBmcm9tIHRyYWluaW5nIGRhdGEgc2V0IHdlIGFyZSBnb2luZyB0byBsZWFybiB3aGF0IGNvbHVtbnMgdG8gZHJvcAogICAgICAgIGRhdGEgPSBYCiAgICAgICAgc2VsZi50b19kcm9wID0gW10KICAgICAgICBzYW1wbF9sZW4gPSBsZW4oZGF0YSkKICAgICAgICBmb3IgaSBpbiBkYXRhLmNvbHVtbnM6CiAgICAgICAgICAgICMgZ2V0IHRoZSBudW1iZXIgb2YgdW5pcXVlIGNvdW50cwogICAgICAgICAgICB1ID0gcGQuRGF0YUZyYW1lKGRhdGFbaV0udmFsdWVfY291bnRzKCkpLnNvcnRfdmFsdWVzKAogICAgICAgICAgICAgICAgYnk9aSwgYXNjZW5kaW5nPUZhbHNlLCBpbnBsYWNlPUZhbHNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgIyB0YWtlIGxlbiBvZiB1IGFuZCBkaXZpZGVkIGl0IGJ5IHRoZSB0b3RhbCBzYW1wbGUgbnVtYmVycywgc28gdGhpcyB3aWxsIGNoZWNrIHRoZSAxc3QgcnVsZSAsIGhhcyB0byBiZSBsb3cgc2F5IDEwJQogICAgICAgICAgICAjIGltcG9ydCBwZGI7IHBkYi5zZXRfdHJhY2UoKQogICAgICAgICAgICBmaXJzdCA9IGxlbih1KSAvIHNhbXBsX2xlbgogICAgICAgICAgICAjIHRoZW4gY2hlY2sgaWYgbW9zdCBjb21tb24gZGl2aWRlZCBieSAybmQgbW9zdCBjb21tb24gcmF0aW8gaXMgMjAgb3IgbW9yZQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgbGVuKHVbaV0pID09IDEKICAgICAgICAgICAgKTogICMgdGhpcyBtZWFucyB0aGF0IGlmIGNvbHVtbiBpcyBub24gdmFyaWFuY2UgLCBhdXRvbWF0aWNhbGx5IG1ha2UgdGhlIG51bWJlciBiaWcgdG8gZHJvcCBpdAogICAgICAgICAgICAgICAgc2Vjb25kID0gMTAwCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWNvbmQgPSB1Lmlsb2NbMCwgMF0gLyB1Lmlsb2NbMSwgMF0KICAgICAgICAgICAgIyBpZiBib3RoIGNvbmRpdGlvbnMgYXJlIHRydWUgdGhlbiBkcm9wIHRoZSBjb2x1bW4sIGhvd2V2ZXIsIHdlIGRvbnQgd2FudCB0byBhbHRlciBjb2x1bW4gdGhhdCBpbmRpY2F0ZSBOQSdzCiAgICAgICAgICAgIGlmIChmaXJzdCA8PSAwLjEwKSBhbmQgKHNlY29uZCA+PSAyMCkgYW5kIChpWy0xMDpdICE9ICJfc3Vycm9nYXRlIik6CiAgICAgICAgICAgICAgICBzZWxmLnRvX2Ryb3AuYXBwZW5kKGkpCiAgICAgICAgICAgICMgbm93IGRyb3AgaWYgdGhlIGNvbHVtbiBoYXMgemVybyB2YXJpYW5jZQogICAgICAgICAgICBpZiAoc2Vjb25kID09IDEwMCkgYW5kIChpWy0xMDpdICE9ICJfc3Vycm9nYXRlIik6CiAgICAgICAgICAgICAgICBzZWxmLnRvX2Ryb3AuYXBwZW5kKGkpCgogICAgZGVmIHRyYW5zZm9ybSgKICAgICAgICAgICAgc2VsZiwgWCwgeT1Ob25lCiAgICApOiAgIyBzaW5jZSBpdCBpcyBvbmx5IGZvciB0cmFpbmluZyBkYXRhIHNldCAsIG5vdGhpbmcgaGVyZQogICAgICAgIGRhdGEgPSBYLmRyb3Aoc2VsZi50b19kcm9wLCBheGlzPTEpCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgZml0X3RyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIGRhdGEgPSBYCiAgICAgICAgc2VsZi5maXQoZGF0YSkKICAgICAgICByZXR1cm4gc2VsZi50cmFuc2Zvcm0oZGF0YSkKCgpjbGFzcyBDYXRlZ29yaWNhbF92YXJpYWJsZXNfV2l0aF9SYXJlX2xldmVscyhCYXNlRXN0aW1hdG9yLCBUcmFuc2Zvcm1lck1peGluKToKICAgICIiIgogICAgLU1lcmdlcyBsZXZlbHMgaW4gY2F0ZWdvcmljYWwgZmVhdHVyZXMgd2l0aCBtb3JlIGZyZXF1ZW50IGxldmVsIGlmIHRoZXkgYXBwZWFyIGxlc3MgdGhhbiBhIHRocmVzaG9sZCBjb3VudAogICAgICBlLmcuIENvbD1bYSxhLGEsYSxiLGIsYyxjXQogICAgICBpZiB0aHJlc2hvbGQgaXMgc2V0IHRvIDIgLCB0aGVuIGMgd2lsbCBiZSBtcmdlZCB3aXRoIGIgYmVjYXVzZSBib3RoIGFyZSBiZWxvdyB0aHJlc2hvbGQKICAgICAgVGhlcmUgaGFzIHRvIGJlIGF0bGVhc3QgdHdvIGxldmVscyBiZWx3byB0aHJlc2hvbGQgZm9yIHRoaXMgdG8gd29yawogICAgICB0aGUgcHJvY2VzcyB3aWxsIGtlZXAgZ29pbmcgdW50aWwgYWxsIHRoZSBsZXZlbHMgaGF2ZSBhdGxlYXN0IDIodGhyZXNob2xkKSBjb3VudHMKICAgIC1Pbmx5IGhhbmRsZXMgY2F0ZWdvcmljYWwgZmVhdHVyZXMKICAgIC1JdCBpcyByZWNvbW1lbmRlZCB0byBydW4gdGhlIFpyb2VfTmVhclplcm9fVmFyaWFuY2UgYW5kIERlZmluZV9kYXRhVHlwZXMgZmlyc3QKICAgIC1JZ25vcmVzIHRhcmdldCB2YXJpYWJsZQogICAgICBBcmdzOgogICAgICAgIHRocmVzaG9sZDogaW50ICwgZGVmYXVsdCAxMAogICAgICAgIHRhcmdldDogc3RyaW5nICwgbmFtZSBvZiB0aGUgdGFyZ2V0IHZhcmlhYmxlCiAgICAgICAgbmV3X2xldmVsX25hbWU6IHN0cmluZyAsIG5hbWUgZ2l2ZW4gdG8gdGhlIG5ldyBsZXZlbCBnZW5lcmF0ZWQsIGRlZmF1bHQgJ290aGVycycKCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgbmV3X2xldmVsX25hbWU9Im90aGVyc19pbmZyZXF1ZW50IiwgdGhyZXNob2xkPTAuMDUpOgogICAgICAgIHNlbGYudGhyZXNob2xkID0gdGhyZXNob2xkCiAgICAgICAgc2VsZi5uZXdfbGV2ZWxfbmFtZSA9IG5ld19sZXZlbF9uYW1lCgogICAgZGVmIGZpdCgKICAgICAgICAgICAgc2VsZiwgWCwgeT1Ob25lCiAgICApOiAgIyB3ZSB3aWxsIGxlYXJuIGZvciB3aGF0IGNvbHVtbm5zIHdoYXQgYXJlIHRoZSBsZXZlbCB0byBtZXJnZSBhcyBvdGhlcnMKICAgICAgICAjIGV2ZXJ5IGxldmVsIG9mIHRoZSBjYXRlZ29yaWNhbCBmZWF0dXJlIGhhcyB0byBiZSBtb3JlIHRoYW4gdGhyZXNob2xzLCBpZiBub3QgdGhleSB3aWxsIGJlIGNsdWJlZCB0b2dhdGhlciBhcyAib3RoZXJzIgogICAgICAgICMgaW4gb3JkZXIgdG8gYXBwbHksIHRoZXJlIHNob3VsZCBiZSBhdGxlYXN0IHR3byBsZXZlbHMgYmVsd28gdGhlIHRocmVzaG9sZCAhCiAgICAgICAgIyBjcmVhdCBhIHBsYWNlIGhvbGRlcgogICAgICAgIGRhdGEgPSBYCiAgICAgICAgc2VsZi5waCA9IHBkLkRhdGFGcmFtZShjb2x1bW5zPWRhdGEuc2VsZWN0X2R0eXBlcyhpbmNsdWRlPSJvYmplY3QiKS5jb2x1bW5zKQogICAgICAgICMgcGguY29sdW1ucyA9IGRmLmNvbHVtbnMjIGNhdGVnb3JpY2FsIG9ubHkKICAgICAgICBmb3IgaSBpbiBkYXRhW3NlbGYucGguY29sdW1uc10uY29sdW1uczoKICAgICAgICAgICAgIyBkZXRlcm1pbmUgdGhlIGluZnJlcXVlYnQgY291bnQKICAgICAgICAgICAgdl9jID0gZGF0YVtpXS52YWx1ZV9jb3VudHMoKQogICAgICAgICAgICBjb3VudF90aCA9IHJvdW5kKHZfYy5xdWFudGlsZShzZWxmLnRocmVzaG9sZCkpCiAgICAgICAgICAgIGEgPSBucC5zdW0oCiAgICAgICAgICAgICAgICBwZC5EYXRhRnJhbWUoZGF0YVtpXS52YWx1ZV9jb3VudHMoKS5zb3J0X3ZhbHVlcygpKVtpXSA8PSBjb3VudF90aAogICAgICAgICAgICApCiAgICAgICAgICAgIGlmIGEgPj0gMjogICMgcmFyZSBsZXZlbHMgaGFzIHRvIGJlIGF0bGVhc3QgdHdvCiAgICAgICAgICAgICAgICBjb3VudCA9IHBkLkRhdGFGcmFtZShkYXRhW2ldLnZhbHVlX2NvdW50cygpLnNvcnRfdmFsdWVzKCkpCiAgICAgICAgICAgICAgICBjb3VudC5jb2x1bW5zID0gWyJmcmUiXQogICAgICAgICAgICAgICAgY291bnQgPSBjb3VudFtjb3VudFsiZnJlIl0gPD0gY291bnRfdGhdCiAgICAgICAgICAgICAgICB0b19jbHViID0gbGlzdChjb3VudC5pbmRleCkKICAgICAgICAgICAgICAgIHNlbGYucGgubG9jWzAsIGldID0gdG9fY2x1YgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5waC5sb2NbMCwgaV0gPSBbXQogICAgICAgICMgIyBhbHNvIG5lZWQgdG8gbWFrZSBhIHBsYWNlIGhvbGRlciB0aGF0IGtlZXAgcmVjb3JkcyBvZiBhbGwgdGhlIGxldmVscyAsIGFuZCBpbiBjYXNlIGEgbmV3IGxldmVsIGFwcGVhcnMgaW4gdGVzdCB3ZSB3aWxsIGNoYW5nZSBpdCB0byBvdGhlcnMKICAgICAgICAjIHNlbGYucGhfbGV2ZWwgPSBwZC5EYXRhRnJhbWUoY29sdW1ucz1kYXRhLmRyb3Aoc2VsZi50YXJnZXQsYXhpcz0xKS5zZWxlY3RfZHR5cGVzKGluY2x1ZGU9Im9iamVjdCIpLmNvbHVtbnMpCiAgICAgICAgIyBmb3IgaSBpbiBzZWxmLnBoX2xldmVsLmNvbHVtbnM6CiAgICAgICAgIyAgIHNlbGYucGhfbGV2ZWwubG9jWzAsaV0gPSBsaXN0KGRhdGFbaV0udmFsdWVfY291bnRzKCkuc29ydF92YWx1ZXMoKS5pbmRleCkKCiAgICBkZWYgdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6ICAjCiAgICAgICAgIyB0cmFuc29ybQogICAgICAgIGRhdGEgPSBYCiAgICAgICAgZm9yIGkgaW4gZGF0YVtzZWxmLnBoLmNvbHVtbnNdLmNvbHVtbnM6CiAgICAgICAgICAgIHRfcmVwbGFjZSA9IHNlbGYucGgubG9jWzAsIGldCiAgICAgICAgICAgIGRhdGFbaV0ucmVwbGFjZSgKICAgICAgICAgICAgICAgIHRvX3JlcGxhY2U9dF9yZXBsYWNlLCB2YWx1ZT1zZWxmLm5ld19sZXZlbF9uYW1lLCBpbnBsYWNlPVRydWUKICAgICAgICAgICAgKQogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIGZpdF90cmFuc2Zvcm0oc2VsZiwgWCwgeT1Ob25lKToKICAgICAgICBkYXRhID0gWAogICAgICAgIHNlbGYuZml0KGRhdGEpCiAgICAgICAgcmV0dXJuIHNlbGYudHJhbnNmb3JtKGRhdGEpCgoKY2xhc3MgTmV3X2NhdGVnb3JpY2FsX0xldmVsc19pbl9UZXN0RGF0YShCYXNlRXN0aW1hdG9yLCBUcmFuc2Zvcm1lck1peGluKToKICAgICIiIgogICAgLVRoaXMgdHJlYXRzIGlmIGEgbmV3IGxldmVsIGFwcGVhcnMgaW4gdGhlIHRlc3QgZGF0YXNldCBjYXRlZ29yaWNhbCdzIGZlYXR1cmUgKGkuZSBhIGxldmVsIG9uIHdoaWhjIG1vZGVsIHdhcyBub3QgdHJhaW5lZCBwcmV2aW91c2x5KQogICAgLUl0IHNpbXBseSByZXBsYWNlcyB0aGUgbmV3IGxldmVsIGluIHRlc3QgZGF0YSBzZXQgd2l0aCB0aGUgbW9zdCBmcmVxdWVudCBvciBsZWFzdCBmcmVxdWVudCBsZXZlbCBpbiB0aGUgc2FtZSBmZWF0dXJlIGluIHRoZSB0cmFpbmluZyBkYXRhIHNldAogICAgLUl0IGlzIHJlY29tbWVuZGVkIHRvIHJ1biB0aGUgWnJvZV9OZWFyWmVyb19WYXJpYW5jZSBhbmQgRGVmaW5lX2RhdGFUeXBlcyBmaXJzdAogICAgLUlnbm9yZXMgdGFyZ2V0IHZhcmlhYmxlCiAgICAgIEFyZ3M6CiAgICAgICAgdGFyZ2V0OiBzdHJpbmcgLCBuYW1lIG9mIHRoZSB0YXJnZXQgdmFyaWFibGUKICAgICAgICByZXBsYWNlbWVudF9zdHJhdGVneTpzdHJpbmcgLCAncmFpc2UgZXhjZXB0aW9uJywgJ2xlYXN0IGZyZXF1ZW50JyBvciAnbW9zdCBmcmVxdWVudCcgKGRlZmF1bHQgJ21vc3QgZnJlcXVlbnQnICkKCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcmVwbGFjZW1lbnRfc3RyYXRlZ3k9Im1vc3QgZnJlcXVlbnQiKToKICAgICAgICBzZWxmLnJlcGxhY2VtZW50X3N0cmF0ZWd5ID0gcmVwbGFjZW1lbnRfc3RyYXRlZ3kKCiAgICBkZWYgZml0KHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgZGF0YSA9IFgKICAgICAgICAjIG5lZWQgdG8gbWFrZSBhIHBsYWNlIGhvbGRlciB0aGF0IGtlZXAgcmVjb3JkcyBvZiBhbGwgdGhlIGxldmVscyAsIGFuZCBpbiBjYXNlIGEgbmV3IGxldmVsIGFwcGVhcnMgaW4gdGVzdCB3ZSB3aWxsIGNoYW5nZSBpdCB0byBvdGhlcnMKICAgICAgICBzZWxmLnBoX3RyYWluX2xldmVsID0gcGQuRGF0YUZyYW1lKAogICAgICAgICAgICBjb2x1bW5zPWRhdGEuc2VsZWN0X2R0eXBlcyhpbmNsdWRlPSJvYmplY3QiKS5jb2x1bW5zCiAgICAgICAgKQogICAgICAgIGZvciBpIGluIHNlbGYucGhfdHJhaW5fbGV2ZWwuY29sdW1uczoKICAgICAgICAgICAgaWYgc2VsZi5yZXBsYWNlbWVudF9zdHJhdGVneSA9PSAibGVhc3QgZnJlcXVlbnQiOgogICAgICAgICAgICAgICAgc2VsZi5waF90cmFpbl9sZXZlbC5sb2NbMCwgaV0gPSBsaXN0KAogICAgICAgICAgICAgICAgICAgIGRhdGFbaV0udmFsdWVfY291bnRzKCkuc29ydF92YWx1ZXMoKS5pbmRleAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5waF90cmFpbl9sZXZlbC5sb2NbMCwgaV0gPSBsaXN0KGRhdGFbaV0udmFsdWVfY291bnRzKCkuaW5kZXgpCgogICAgZGVmIHRyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOiAgIwogICAgICAgIGRhdGEgPSBYCiAgICAgICAgIyB0cmFuc29ybQogICAgICAgICMgd2UgbmVlZCB0byBsZWFybiB0aGUgc2FtZSBmb3IgdGVzdCBkYXRhICwgYW5kIHRoZW4gd2Ugd2lsbCBjb21wYXJlIHRvIGNoZWNrIHdoYXQgbGV2ZWxzIGFyZSBuZXcgaW4gdGhlcmUKICAgICAgICBzZWxmLnBoX3Rlc3RfbGV2ZWwgPSBwZC5EYXRhRnJhbWUoCiAgICAgICAgICAgIGNvbHVtbnM9ZGF0YS5zZWxlY3RfZHR5cGVzKGluY2x1ZGU9Im9iamVjdCIpLmNvbHVtbnMKICAgICAgICApCiAgICAgICAgZm9yIGkgaW4gc2VsZi5waF90ZXN0X2xldmVsLmNvbHVtbnM6CiAgICAgICAgICAgIHNlbGYucGhfdGVzdF9sZXZlbC5sb2NbMCwgaV0gPSBsaXN0KAogICAgICAgICAgICAgICAgZGF0YVtpXS52YWx1ZV9jb3VudHMoKS5zb3J0X3ZhbHVlcygpLmluZGV4CiAgICAgICAgICAgICkKCiAgICAgICAgIyBuZXcgd2UgaGF2ZSBsZXZlbHMgZm9yIGJvdGggdGVzdCBhbmQgdHJhaW4sIHdlIHdpbGwgc3RhcnQgY29tcGFyaW5nIGFuZCByZXBsYWNpbmcgbGV2ZWxzIGluIHRlc3Qgc2V0IChPbmx5IGlmIHRlc3Qgc2V0IGhhcyBuZXcgbGV2ZWxzKQogICAgICAgIGZvciBpIGluIHNlbGYucGhfdGVzdF9sZXZlbC5jb2x1bW5zOgogICAgICAgICAgICBuZXcgPSBsaXN0KAogICAgICAgICAgICAgICAgKHNldChzZWxmLnBoX3Rlc3RfbGV2ZWwubG9jWzAsIGldKSAtIHNldChzZWxmLnBoX3RyYWluX2xldmVsLmxvY1swLCBpXSkpCiAgICAgICAgICAgICkKICAgICAgICAgICAgIyBub3cgaWYgdGhlcmUgaXMgYSBkaWZmZXJlbmNlICwgb25seSB0aGVuIHJlcGxhY2UgaXQKICAgICAgICAgICAgaWYgbGVuKG5ldykgPiAwOgogICAgICAgICAgICAgICAgaWYgc2VsZi5yZXBsYWNlbWVudF9zdHJhdGVneSA9PSAicmFpc2UgZXhjZXB0aW9uIjoKICAgICAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICBmIkNvbHVtbiAne2l9JyBjb250YWlucyBsZXZlbHMgJ3tuZXd9JyB3aGljaCB3ZXJlIG5vdCBwcmVzZW50IGluIHRyYWluIGRhdGEuIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGRhdGFbaV0ucmVwbGFjZShuZXcsIHNlbGYucGhfdHJhaW5fbGV2ZWwubG9jWzAsIGldWzBdLCBpbnBsYWNlPVRydWUpCgogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIGZpdF90cmFuc2Zvcm0oCiAgICAgICAgICAgIHNlbGYsIFgsIHk9Tm9uZQogICAgKTogICMgVGhlcmUgaXMgbm8gdHJhbnNmb3JtYXRpb24gaGFwcGVuaW5nIGluIHRyYWluaW5nIGRhdGEgc2V0LCBpdHMgYWxsIGFib3V0IHRlc3QKICAgICAgICBkYXRhID0gWAogICAgICAgIHNlbGYuZml0KGRhdGEpCiAgICAgICAgcmV0dXJuIGRhdGEKCgojIEJpbm5pbmcgZm9yIENvbnRpbmlvdXMKY2xhc3MgQmlubmluZyhCYXNlRXN0aW1hdG9yLCBUcmFuc2Zvcm1lck1peGluKToKICAgICIiIgogICAgLSBDb252ZXJ0cyBudW1lcmljYWwgdmFyaWFibGVzIHRvIGNhdGFnb3JpY2FsIHZhcmlhYmxlIHRocm91Z2ggYmlubmluZwogICAgLSBOdW1iZXIgb2YgYmlubnMgYXJlIGF1dG9taXRpY2FsbHkgZGV0ZXJtaW5lZCB0aHJvdWdoIFN0dXJnZXMgbWV0aG9kCiAgICAtIE9uY2UgZGlzY3JldGl6ZSwgb3JpZ2luYWwgZmVhdHVyZSB3aWxsIGJlIGRyb3BwZWQKICAgICAgICBBcmdzOgogICAgICAgICAgICBmZWF0dXJlc190b19kaXNjcmV0aXplOiBsaXN0IG9mIGZlYXR1ciBuYW1lcyB0byBiZSBiaW5uZWQKCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZiwgZmVhdHVyZXNfdG9fZGlzY3JldGl6ZSk6CiAgICAgICAgc2VsZi5mZWF0dXJlc190b19kaXNjcmV0aXplID0gZmVhdHVyZXNfdG9fZGlzY3JldGl6ZQoKICAgIGRlZiBmaXQoc2VsZiwgWCwgeT1Ob25lKToKICAgICAgICBzZWxmLmZpdF90cmFuc2Zvcm0oWCwgeT15KQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIHRyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIGRhdGEgPSBYCiAgICAgICAgIyBvbmx5IGRvIGlmIGZlYXR1cmVzIGFyZSBwcm92aWRlZAogICAgICAgIGlmIGxlbihzZWxmLmZlYXR1cmVzX3RvX2Rpc2NyZXRpemUpID4gMDoKICAgICAgICAgICAgZGF0YV90ID0gc2VsZi5kaXNjLnRyYW5zZm9ybSgKICAgICAgICAgICAgICAgIG5wLmFycmF5KGRhdGFbc2VsZi5mZWF0dXJlc190b19kaXNjcmV0aXplXSkucmVzaGFwZSgKICAgICAgICAgICAgICAgICAgICAtMSwgc2VsZi5sZW5fY29sdW1ucwogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgICMgbWFrZSBwYW5kYXMgZGF0YSBmcmFtZQogICAgICAgICAgICBkYXRhX3QgPSBwZC5EYXRhRnJhbWUoCiAgICAgICAgICAgICAgICBkYXRhX3QsIGNvbHVtbnM9c2VsZi5mZWF0dXJlc190b19kaXNjcmV0aXplLCBpbmRleD1kYXRhLmluZGV4CiAgICAgICAgICAgICkKICAgICAgICAgICAgIyBhbGwgdGhlc2UgY29sdW1ucyBhcmUgY2F0YWdvcmljYWwKICAgICAgICAgICAgZGF0YV90ID0gZGF0YV90LmFzdHlwZShzdHIpCiAgICAgICAgICAgICMgZHJvcCBvcmlnaW5hbCBjb2x1bW5zCiAgICAgICAgICAgIGRhdGEuZHJvcChzZWxmLmZlYXR1cmVzX3RvX2Rpc2NyZXRpemUsIGF4aXM9MSwgaW5wbGFjZT1UcnVlKQogICAgICAgICAgICAjIGFkZCBuZXdseSBjcmVhdGVkIGNvbHVtbnMKICAgICAgICAgICAgZGF0YSA9IHBkLmNvbmNhdCgoZGF0YSwgZGF0YV90KSwgYXhpcz0xKQogICAgICAgIHJldHVybiBkYXRhCgogICAgZGVmIGZpdF90cmFuc2Zvcm0oc2VsZiwgWCwgeT1Ob25lKToKICAgICAgICBkYXRhID0gWAogICAgICAgICMgb25seSBkbyBpZiBmZWF0dXJlcyBhcmUgZ2l2ZW4KCiAgICAgICAgaWYgbGVuKHNlbGYuZmVhdHVyZXNfdG9fZGlzY3JldGl6ZSkgPiAwOgoKICAgICAgICAgICAgIyBwbGFjZSBob2xkZXIgZm9yIGFsbCB0aGUgZmVhdHVyZXMgZm9yIHRoZWlyIGJpbm5zCiAgICAgICAgICAgIHNlbGYuYmlubnMgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZlYXR1cmVzX3RvX2Rpc2NyZXRpemU6CiAgICAgICAgICAgICAgICAjIGdldCBudW1iciBvZiBiaW5ucwogICAgICAgICAgICAgICAgaGlzdCwgXyA9IG5wLmhpc3RvZ3JhbShkYXRhW2ldLCBiaW5zPSJzdHVyZ2VzIikKICAgICAgICAgICAgICAgIHNlbGYuYmlubnMuYXBwZW5kKGxlbihoaXN0KSkKCiAgICAgICAgICAgICMgaG93IG1hbnkgY29sdW1zIHRvIGRlYWwgd2l0aAogICAgICAgICAgICBzZWxmLmxlbl9jb2x1bW5zID0gbGVuKHNlbGYuZmVhdHVyZXNfdG9fZGlzY3JldGl6ZSkKICAgICAgICAgICAgIyBub3cgZG8gZml0IHRyYW5zZm9ybQogICAgICAgICAgICBzZWxmLmRpc2MgPSBLQmluc0Rpc2NyZXRpemVyKAogICAgICAgICAgICAgICAgbl9iaW5zPXNlbGYuYmlubnMsIGVuY29kZT0ib3JkaW5hbCIsIHN0cmF0ZWd5PSJrbWVhbnMiCiAgICAgICAgICAgICkKICAgICAgICAgICAgZGF0YV90ID0gc2VsZi5kaXNjLmZpdF90cmFuc2Zvcm0oCiAgICAgICAgICAgICAgICBucC5hcnJheShkYXRhW3NlbGYuZmVhdHVyZXNfdG9fZGlzY3JldGl6ZV0pLnJlc2hhcGUoCiAgICAgICAgICAgICAgICAgICAgLTEsIHNlbGYubGVuX2NvbHVtbnMKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICAgICAjIG1ha2UgcGFuZGFzIGRhdGEgZnJhbWUKICAgICAgICAgICAgZGF0YV90ID0gcGQuRGF0YUZyYW1lKAogICAgICAgICAgICAgICAgZGF0YV90LCBjb2x1bW5zPXNlbGYuZmVhdHVyZXNfdG9fZGlzY3JldGl6ZSwgaW5kZXg9ZGF0YS5pbmRleAogICAgICAgICAgICApCiAgICAgICAgICAgICMgYWxsIHRoZXNlIGNvbHVtbnMgYXJlIGNhdGFnb3JpY2FsCiAgICAgICAgICAgIGRhdGFfdCA9IGRhdGFfdC5hc3R5cGUoc3RyKQogICAgICAgICAgICAjIGRyb3Agb3JpZ2luYWwgY29sdW1ucwogICAgICAgICAgICBkYXRhLmRyb3Aoc2VsZi5mZWF0dXJlc190b19kaXNjcmV0aXplLCBheGlzPTEsIGlucGxhY2U9VHJ1ZSkKICAgICAgICAgICAgIyBhZGQgbmV3bHkgY3JlYXRlZCBjb2x1bW5zCiAgICAgICAgICAgIGRhdGEgPSBwZC5jb25jYXQoKGRhdGEsIGRhdGFfdCksIGF4aXM9MSkKCiAgICAgICAgcmV0dXJuIGRhdGEKCgojIG1ha2UgZHVtbXkgdmFyaWFibGVzCmNsYXNzIER1bW1pZnkoQmFzZUVzdGltYXRvciwgVHJhbnNmb3JtZXJNaXhpbik6CiAgICAiIiIKICAgIC0gbWFrZXMgb25lIGhvdCBlbmNvZGVkIHZhcmlhYmxlcyBmb3IgZHVtbXkgdmFyaWFibGUKICAgIC0gaXQgaXMgSElHSExZIHJlY29tbWVuZGVkIHRvIHJ1biB0aGUgU2VsZWN0X0RhdGFfVHlwZSBjbGFzcyBmaXJzdAogICAgLSBJZ25vcmVzIHRhcmdldCB2YXJpYWJsZQoKICAgICAgQXJnczoKICAgICAgICB0YXJnZXQ6IHN0cmluZyAsIG5hbWUgb2YgdGhlIHRhcmdldCB2YXJpYWJsZQogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgoKICAgICAgICAjIGNyZWF0IG9oZSBvYmplY3QKICAgICAgICBzZWxmLm9oZSA9IE9uZUhvdEVuY29kZXIoaGFuZGxlX3Vua25vd249Imlnbm9yZSIsIGR0eXBlPW5wLmZsb2F0MzIpCgogICAgZGVmIGZpdChzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIGRhdGEgPSBYCiAgICAgICAgIyB3aWxsIG9ubHkgZG8gdGhpcyBpZiB0aGVyZSBhcmUgY2F0ZWdvcmljYWwgdmFyaWFibGVzCiAgICAgICAgaWYgbGVuKGRhdGEuc2VsZWN0X2R0eXBlcyhpbmNsdWRlPSgib2JqZWN0IikpLmNvbHVtbnMpID4gMDoKICAgICAgICAgICAgIyB3ZSBuZWVkIHRvIGxlYXJuIHRoZSBjb2x1bW4gbmFtZXMgb25jZSB0aGUgdHJhaW5pbmcgZGF0YSBzZXQgaXMgZHVtbWlmeQogICAgICAgICAgICAjIHNhdmUgbm9uIGNhdGVnb3JpY2FsIGRhdGEKICAgICAgICAgICAgc2VsZi5kYXRhX25vbmMgPSBkYXRhLnNlbGVjdF9kdHlwZXMoZXhjbHVkZT0oIm9iamVjdCIpKQogICAgICAgICAgICAjICMgcGx1cyB3ZSB3aWxsIG9ubHkgdGFrZSBvYmplY3QgZGF0YSB0eXBlcwogICAgICAgICAgICBjYXRlZ29yaWNhbF9kYXRhID0gZGF0YS5zZWxlY3RfZHR5cGVzKGluY2x1ZGU9KCJvYmplY3QiKSkKICAgICAgICAgICAgIyAjIG5vdyBmaXQgdGhlIHRyYWluaW4gY29sdW1uCiAgICAgICAgICAgIHNlbGYub2hlLmZpdChjYXRlZ29yaWNhbF9kYXRhKQogICAgICAgICAgICBzZWxmLmRhdGFfY29sdW1ucyA9IHNlbGYub2hlLmdldF9mZWF0dXJlX25hbWVzKGNhdGVnb3JpY2FsX2RhdGEuY29sdW1ucykKCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgZGF0YSA9IFguY29weSgpCiAgICAgICAgIyB3aWxsIG9ubHkgZG8gdGhpcyBpZiB0aGVyZSBhcmUgY2F0ZWdvcmljYWwgdmFyaWFibGVzCiAgICAgICAgaWYgbGVuKGRhdGEuc2VsZWN0X2R0eXBlcyhpbmNsdWRlPSgib2JqZWN0IikpLmNvbHVtbnMpID4gMDoKICAgICAgICAgICAgIyBvbmx5IGZvciB0ZXN0IGRhdGEKICAgICAgICAgICAgc2VsZi5kYXRhX25vbmMgPSBkYXRhLnNlbGVjdF9kdHlwZXMoZXhjbHVkZT0oIm9iamVjdCIpKQogICAgICAgICAgICAjIGZpdCB3aXRob3V0IHRhcmdldCBhbmQgb25seSBjYXRlZ29yaWNhbCBjb2x1bW5zCiAgICAgICAgICAgIGFycmF5ID0gc2VsZi5vaGUudHJhbnNmb3JtKGRhdGEuc2VsZWN0X2R0eXBlcyhpbmNsdWRlPSgib2JqZWN0IikpKS50b2FycmF5KCkKICAgICAgICAgICAgZGF0YV9kdW1taWVzID0gcGQuRGF0YUZyYW1lKGFycmF5LCBjb2x1bW5zPXNlbGYuZGF0YV9jb2x1bW5zKQogICAgICAgICAgICBkYXRhX2R1bW1pZXMuaW5kZXggPSBzZWxmLmRhdGFfbm9uYy5pbmRleAogICAgICAgICAgICAjIG5vdyBwdXQgdGFyZ2V0ICwgbnVtZXJpY2FsIGFuZCBjYXRlZ29yaWNhbCB2YXJpYWJsZXMgYmFjayB0b2dhdGhlcgogICAgICAgICAgICBkYXRhID0gcGQuY29uY2F0KChzZWxmLmRhdGFfbm9uYywgZGF0YV9kdW1taWVzKSwgYXhpcz0xKQogICAgICAgICAgICBkZWwgc2VsZi5kYXRhX25vbmMKICAgICAgICAgICAgcmV0dXJuIGRhdGEKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gZGF0YQoKICAgIGRlZiBmaXRfdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgZGF0YSA9IFguY29weSgpCiAgICAgICAgIyB3aWxsIG9ubHkgZG8gdGhpcyBpZiB0aGVyZSBhcmUgY2F0ZWdvcmljYWwgdmFyaWFibGVzCiAgICAgICAgaWYgbGVuKGRhdGEuc2VsZWN0X2R0eXBlcyhpbmNsdWRlPSgib2JqZWN0IikpLmNvbHVtbnMpID4gMDoKICAgICAgICAgICAgc2VsZi5maXQoZGF0YSkKICAgICAgICAgICAgIyBmaXQgd2l0aG91dCB0YXJnZXQgYW5kIG9ubHkgY2F0ZWdvcmljYWwgY29sdW1ucwogICAgICAgICAgICBhcnJheSA9IHNlbGYub2hlLnRyYW5zZm9ybShkYXRhLnNlbGVjdF9kdHlwZXMoaW5jbHVkZT0oIm9iamVjdCIpKSkudG9hcnJheSgpCiAgICAgICAgICAgIGRhdGFfZHVtbWllcyA9IHBkLkRhdGFGcmFtZShhcnJheSwgY29sdW1ucz1zZWxmLmRhdGFfY29sdW1ucykKICAgICAgICAgICAgZGF0YV9kdW1taWVzLmluZGV4ID0gc2VsZi5kYXRhX25vbmMuaW5kZXgKICAgICAgICAgICAgIyBub3cgcHV0IHRhcmdldCAsIG51bWVyaWNhbCBhbmQgY2F0ZWdvcmljYWwgdmFyaWFibGVzIGJhY2sgdG9nYXRoZXIKICAgICAgICAgICAgZGF0YSA9IHBkLmNvbmNhdCgoc2VsZi5kYXRhX25vbmMsIGRhdGFfZHVtbWllcyksIGF4aXM9MSkKICAgICAgICAgICAgIyByZW1vdmUgdW53YW50ZWQgYXR0cmlidXRlcwogICAgICAgICAgICBkZWwgc2VsZi5kYXRhX25vbmMKICAgICAgICAgICAgcmV0dXJuIGRhdGEKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gZGF0YQoKCmNsYXNzIFJlZHVjZV9DYXJkaW5hbGl0eV93aXRoX0NsdXN0ZXJpbmcoQmFzZUVzdGltYXRvciwgVHJhbnNmb3JtZXJNaXhpbik6CiAgICAiIiIKICAgIC0gUmVkdWNlcyB0aGUgbGV2ZWwgb2YgY2F0ZWdvcmljYWwgY29sdW1uIC8gY2FyZGluYWxpdHkgdGhyb3VnaCBjbHVzdGVyaW5nCiAgICAtIEhpZ2hseSByZWNvbW1lbmRlZCB0byBydW4gdGhlIERhdGFUeXBlc19BdXRvX2luZmVyIGNsYXNzIGZpcnN0CiAgICAgIEFyZ3M6CiAgICAgICAgICB0YXJnZXRfdmFyaWFibGU6IHRhcmdldCB2YXJpYWJsZSAoaW50ZWdlciBvciBudW1lcmljYWwgb25seSkKICAgICAgICAgIGNhdGVnb3JpY2FsX2ZlYXR1cmU6IGxpc3Qgb2YgZmVhdHVyZXMgb24gd2hpY2ggY2x1c3RlcmluZyAgaXMgdG8gYmUgYXBwbGllZCAvIGNhcmRpbmFsaXR5IHRvIGJlIHJlZHVjZWQKICAgICAgICAgIGNoZWNrX2NsdXN0ZXJzX3VwdG86IHRvIGRldGVybWluZSBvcHRpbXVtIG51bWJlciBvZiBrbWVhbnMgY2x1c3RlcnMsIHNldCB0aGUgdXBwbGVyIGxpbWl0IG9mIGNsdXN0ZXJzCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgIGNhdGVnb3JpY2FsX2ZlYXR1cmU9W10sCiAgICAgICAgICAgIGNoZWNrX2NsdXN0ZXJzX3VwdG89MzAsCiAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUsCiAgICApOgogICAgICAgIHNlbGYuZmVhdHVyZSA9IGNhdGVnb3JpY2FsX2ZlYXR1cmUKICAgICAgICBzZWxmLmNoZWNrX2NsdXN0ZXJzID0gY2hlY2tfY2x1c3RlcnNfdXB0byArIDEKICAgICAgICBzZWxmLnJhbmRvbSA9IHJhbmRvbV9zdGF0ZQoKICAgICMgICAgICAgICBzZWxmLmNhdGVnb3JpY2FsX2ZlYXR1cmUgPSBjYXRlZ29yaWNhbF9mZWF0dXJlCiAgICAjICAgICAgICAgc2VsZi5jaGVja19jbHVzdGVyc191cHRvID0gY2hlY2tfY2x1c3RlcnNfdXB0bwogICAgIyAgICAgICAgIHNlbGYucmFuZG9tX3N0YXRlID0gcmFuZG9tX3N0YXRlCgogICAgZGVmIGZpdChzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIHNlbGYuZml0X3RyYW5zZm9ybShYLCB5PXkpCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgZGF0YSA9IFgKICAgICAgICAjIHdlIGFscmVhZHkga25vdyB3aGljaCBsZXZhbCBiZWxvbmdzIHRvIHdoaWhjIGNsdXN0ZXIgLCBzbyBhbGwgdyBuZWVkIGlzIHRvIHJlcGxhY2UgbGV2ZWxzIHdpdGggY2x1c3RlcnMgd2UgYWxyZWFkeSBoYXZlIGZyb20gdHJhaW5pbmcgZGF0YSBzZXQKICAgICAgICBmb3IgaSwgeiBpbiB6aXAoc2VsZi5mZWF0dXJlLCBzZWxmLnBoX2RhdGEpOgogICAgICAgICAgICBkYXRhW2ldID0gZGF0YVtpXS5yZXBsYWNlKGxpc3QoelsibGV2ZWxzIl0pLCB6WyJjbHVzdGVyIl0pCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgZml0X3RyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIGRhdGEgPSBYLmNvcHkoKQogICAgICAgICMgZmlyc3QgY29udmVydCB0byBkdW1teQogICAgICAgIGlmIGxlbihkYXRhLnNlbGVjdF9kdHlwZXMoaW5jbHVkZT0ib2JqZWN0IikuY29sdW1ucykgPiAwOgogICAgICAgICAgICBzZWxmLmR1bW15ID0gRHVtbWlmeSh5KQogICAgICAgICAgICBkYXRhX3QgPSBzZWxmLmR1bW15LmZpdF90cmFuc2Zvcm0oZGF0YSkKICAgICAgICAgICAgIyBkYXRhX3QxID0gZGF0YV90MS5kcm9wKHNlbGYudGFyZ2V0LGF4aXM9MSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkYXRhX3QgPSBkYXRhCgogICAgICAgICMgbm93IG1ha2UgUExTCiAgICAgICAgc2VsZi5wbHMgPSBQTFNSZWdyZXNzaW9uKAogICAgICAgICAgICBuX2NvbXBvbmVudHM9MgogICAgICAgICkgICMgc2luY2Ugd2UgYXJlIG9ubHkgdXNpbmcgdHdvIGNvbXBvbmVuZXRzIHRvIGdyb3VwICNQTFNSZWdyZXNzaW9uKG5fY29tcG9uZW50cz1sZW4oZGF0YV90MS5jb2x1bW5zKS0xKQogICAgICAgIGRhdGFfcGxzID0gc2VsZi5wbHMuZml0X3RyYW5zZm9ybShkYXRhX3QsIHkpWzBdCgogICAgICAgICMgIyBub3cgd2Ugd2lsbCB0YWtlIG9uZSBjb21wb25lbnQgYW5kIHRoZW4gd2UgY2FsY3VsYXRlIG1lYW4sIG1lZGlhbiwgbWluLCBtYXggYW5kIHNkIG9mIHRoYXQgb25lIGNvbXBvbmVudCBncm91cGVkIGJ5IHRoZSBjYXRlZ29yaWNhbCBsZXZlbHMKICAgICAgICBzZWxmLnBoX2RhdGEgPSBbXQogICAgICAgIHNlbGYucGhfY2x1c3RlcnMgPSBbXQogICAgICAgIGZvciBpIGluIHNlbGYuZmVhdHVyZToKICAgICAgICAgICAgZGF0YV90MSA9IHBkLkRhdGFGcmFtZSgKICAgICAgICAgICAgICAgIGRpY3QobGV2ZWxzPWRhdGFbaV0sIGNvbXAxPWRhdGFfcGxzWzosIDBdLCBjb21wMj1kYXRhX3Bsc1s6LCAxXSksCiAgICAgICAgICAgICAgICBpbmRleD1kYXRhLmluZGV4LAogICAgICAgICAgICApCiAgICAgICAgICAgICMgbm93IGdyb3VwIGJ5IGZlYXR1cmUKICAgICAgICAgICAgZGF0YV90MSA9IGRhdGFfdDEuZ3JvdXBieSgibGV2ZWxzIikKICAgICAgICAgICAgZGF0YV90MSA9IGRhdGFfdDFbWyJjb21wMSIsICJjb21wMiJdXS5hZ2coCiAgICAgICAgICAgICAgICBbIm1lYW4iLCAibWVkaWFuIiwgIm1pbiIsICJtYXgiLCAic3RkIl0KICAgICAgICAgICAgKSAgIyB0aGlzIGdpdmVzIHVzIGEgZGYgd2l0aCBvbmx5IG51bWVyaWMgY29sdW1ucyAobWluICwgbWF4ICkgYW5kIGxldmVsIGFzIGluZGV4CiAgICAgICAgICAgICMgc29tZSB0aW1lIGlmIGEgbGV2ZWwgaGFzIG9ubHkgb25lIHJlY29yZCAgaXRzIHN0ZCB3aWxsIGNvbWUgdXAgYXMgTmFOLCBzbyBjb252ZXJ0IE5hTiB0byAxCiAgICAgICAgICAgIGRhdGFfdDEuZmlsbG5hKDEsIGlucGxhY2U9VHJ1ZSkKCiAgICAgICAgICAgICMgbm93IG51bWJlciBvZiBjbHVzdGVycyBjYW50IGJlIG1vcmUgdGhhbiB0aGUgbnVtYmVyIG9mIHNhbXBsZXMgaW4gYWdncmVnYXRlZCBkYXRhICwgc28KICAgICAgICAgICAgc2VsZi5jaGVja19jbHVzdGVycyA9IG1pbihzZWxmLmNoZWNrX2NsdXN0ZXJzLCBsZW4oZGF0YV90MSkpCgogICAgICAgICAgICAjICMgd2UgYXJlIGdvaWduIHRvIG1ha2UgYSBwbGFjZSBob2xkZXIgLCBmb3IgMiB0byAyMCBjbHVzdGVycwogICAgICAgICAgICBzZWxmLnBoID0gcGQuRGF0YUZyYW1lKAogICAgICAgICAgICAgICAgbnAuYXJhbmdlKDIsIHNlbGYuY2hlY2tfY2x1c3RlcnMsIDEpLCBjb2x1bW5zPVsiY2x1c3RlcnMiXQogICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYucGhbIlNpbGhvdWV0dGUiXSA9IGZsb2F0KDApCiAgICAgICAgICAgIHNlbGYucGhbImNhbGluc2tpIl0gPSBmbG9hdCgwKQoKICAgICAgICAgICAgIyBOb3cgc3RhcnQgbWFraW5nIGNsdXN0ZXJzCiAgICAgICAgICAgIGZvciBrIGluIHNlbGYucGguaW5kZXg6CiAgICAgICAgICAgICAgICBjID0gc2VsZi5waFsiY2x1c3RlcnMiXVtrXQogICAgICAgICAgICAgICAgc2VsZi5rX29iamVjdCA9IGNsdXN0ZXIuS01lYW5zKAogICAgICAgICAgICAgICAgICAgIG5fY2x1c3RlcnM9YywKICAgICAgICAgICAgICAgICAgICBpbml0PSJrLW1lYW5zKysiLAogICAgICAgICAgICAgICAgICAgIHByZWNvbXB1dGVfZGlzdGFuY2VzPSJhdXRvIiwKICAgICAgICAgICAgICAgICAgICBuX2luaXQ9MTAsCiAgICAgICAgICAgICAgICAgICAgcmFuZG9tX3N0YXRlPXNlbGYucmFuZG9tLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgc2VsZi5rX29iamVjdC5maXQoZGF0YV90MSkKICAgICAgICAgICAgICAgIHNlbGYucGguaWxvY1trLCAxXSA9IG1ldHJpY3Muc2lsaG91ZXR0ZV9zY29yZSgKICAgICAgICAgICAgICAgICAgICBkYXRhX3QxLCBzZWxmLmtfb2JqZWN0LmxhYmVsc18KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHNlbGYucGguaWxvY1trLCAyXSA9IG1ldHJpY3MuY2FsaW5za2lfaGFyYWJhc3pfc2NvcmUoCiAgICAgICAgICAgICAgICAgICAgZGF0YV90MSwgc2VsZi5rX29iamVjdC5sYWJlbHNfCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICMgICAgICAgICAgICAgcHJpbnQoc2VsZi5waCkKCiAgICAgICAgICAgICMgbm93IHN0YW5kYXJkaXplIHRoZSBzY29yZXMgYW5kIG1ha2UgYSB0b3RhbCBjb2x1bW4KICAgICAgICAgICAgbSA9IE1pbk1heFNjYWxlcigoLTEsIDEpKQogICAgICAgICAgICBzZWxmLnBoWyJjYWxpbnNraSJdID0gbS5maXRfdHJhbnNmb3JtKAogICAgICAgICAgICAgICAgbnAuYXJyYXkoc2VsZi5waFsiY2FsaW5za2kiXSkucmVzaGFwZSgtMSwgMSkKICAgICAgICAgICAgKQogICAgICAgICAgICBzZWxmLnBoWyJTaWxob3VldHRlIl0gPSBtLmZpdF90cmFuc2Zvcm0oCiAgICAgICAgICAgICAgICBucC5hcnJheShzZWxmLnBoWyJTaWxob3VldHRlIl0pLnJlc2hhcGUoLTEsIDEpCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5waFsidG90YWwiXSA9IHNlbGYucGhbIlNpbGhvdWV0dGUiXSArIHNlbGYucGhbImNhbGluc2tpIl0KICAgICAgICAgICAgIyBzb3J0IGl0IGJ5IHRvdGFsIGNvbHVtbiBhbmQgdGFrZSB0aGUgZmlyc3Qgcm93IGNvbHVtbiAwICwgdGhhdCB3b3VsZCByZXByZXNlbnQgdGhlIG9wdGltYWwgY2x1c3RlcnMKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2VsZi5jbHVzdGVycyA9IGludCgKICAgICAgICAgICAgICAgICAgICBzZWxmLnBoW3NlbGYucGhbInRvdGFsIl0gPT0gbWF4KHNlbGYucGhbInRvdGFsIl0pXVsiY2x1c3RlcnMiXQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICBleGNlcHQ6ICAjIGluIGNhc2UgdGhlcmUgaXNudCBhIGRlY2lzaXZlIG1lYXN1cmUgLCB0YWtlIGNhbGluc2tpIGFzIHllYXJkIHN0aWNrCiAgICAgICAgICAgICAgICBzZWxmLmNsdXN0ZXJzID0gaW50KAogICAgICAgICAgICAgICAgICAgIHNlbGYucGhbc2VsZi5waFsiY2FsaW5za2kiXSA9PSBtYXgoc2VsZi5waFsiY2FsaW5za2kiXSldWyJjbHVzdGVycyJdCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYucGhfY2x1c3RlcnMuYXBwZW5kKHNlbGYucGgpCiAgICAgICAgICAgICMgTm93IG1ha2UgdGhlIGZpbmFsIGNsdXN0ZXIgb2JqZWN0CiAgICAgICAgICAgIHNlbGYua19vYmplY3QgPSBjbHVzdGVyLktNZWFucygKICAgICAgICAgICAgICAgIG5fY2x1c3RlcnM9c2VsZi5jbHVzdGVycywKICAgICAgICAgICAgICAgIGluaXQ9ImstbWVhbnMrKyIsCiAgICAgICAgICAgICAgICBwcmVjb21wdXRlX2Rpc3RhbmNlcz0iYXV0byIsCiAgICAgICAgICAgICAgICBuX2luaXQ9MTAsCiAgICAgICAgICAgICAgICByYW5kb21fc3RhdGU9c2VsZi5yYW5kb20sCiAgICAgICAgICAgICkKICAgICAgICAgICAgIyBub3cgZG8gZml0IHByZWRpY3QKICAgICAgICAgICAgcHJlZGljdCA9IHNlbGYua19vYmplY3QuZml0X3ByZWRpY3QoZGF0YV90MSkKICAgICAgICAgICAgIyBwdXQgaXQgYmFjayB3aXRoIHRoZSBncm91cCBieSBhZ2dyZWdhdGUgY29sdW1ucwogICAgICAgICAgICBkYXRhX3QxWyJjbHVzdGVyIl0gPSBwcmVkaWN0CiAgICAgICAgICAgIHByaW50KCJwcmVkaWN0IikKICAgICAgICAgICAgZGF0YV90MVsiY2x1c3RlciJdID0gZGF0YV90MVsiY2x1c3RlciJdLmFwcGx5KHN0cikKICAgICAgICAgICAgIyBub3cgd2UgZG9udCBuZWVkIGFsbCB0aGUgY29sdW1ucywgb25seSB0aGUgY2x1c3RlciBjb2x1bW4gaXMgcmVxdWlyZWQgYWxvbmcgd2l0aCB0aGUgaW5kZXggKGluZGV4IGFsc28gaGFzIGEgbmFtZSAsIHdlICBncm91cHkgYXMgImxldmVscyIpCiAgICAgICAgICAgIGRhdGFfdDEgPSBkYXRhX3QxW1siY2x1c3RlciJdXQogICAgICAgICAgICAjIG5vdyBjb252ZXJ0IGluZGV4IG90IHRoZSBjb2x1bW4KICAgICAgICAgICAgZGF0YV90MS5yZXNldF9pbmRleCgKICAgICAgICAgICAgICAgIGxldmVsPTAsIGlucGxhY2U9VHJ1ZQogICAgICAgICAgICApICAjIHRoaXMgdGFibGUgbm93IG9ubHkgY29udGFpbnMgZXZlcnkgbGV2ZWwgYW5kIGl0cyBjbHVzdGVyCiAgICAgICAgICAgICMgc2VsZi5kYXRhX3QxPSBkYXRhX3QxCiAgICAgICAgICAgICMgd2UgY2FuIG5vdyByZXBsYWNlIGNsdXN0ZXIgd2l0aCB0aGUgb3JpZ2luYWwgbGV2ZWwgaW4gdGhlIG9yaWdpbmFsIGRhdGEgZnJhbWUKICAgICAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0ucmVwbGFjZShsaXN0KGRhdGFfdDFbImxldmVscyJdKSwgZGF0YV90MVsiY2x1c3RlciJdKQogICAgICAgICAgICBzZWxmLnBoX2RhdGEuYXBwZW5kKGRhdGFfdDEpCiAgICAgICAgcmV0dXJuIGRhdGEKCgojIENsdXN0ZXJpbmcgY2F0ZWdvcmljYWwgZGF0YQpjbGFzcyBSZWR1Y2VfQ2FyZGluYWxpdHlfd2l0aF9Db3VudHMoQmFzZUVzdGltYXRvciwgVHJhbnNmb3JtZXJNaXhpbik6CiAgICAiIiIKICAgIC0gUmVkdWNlcyB0aGUgbGV2ZWwgb2YgY2F0ZWdvcmljYWwgY29sdW1uIGJ5IHJlcGxhY2luZyBsZXZlbHMgd2l0aCB0aGVpciBjb3VudCAmIGNvbnZlcnRpbmcgb2JqZWN0cyBpbnRvIGZsb2F0CiAgICAgIEFyZ3M6CiAgICAgICAgICBjYXRlZ29yaWNhbF9mZWF0dXJlOiBsaXN0IG9mIGZlYXR1cmVzIG9uIHdoaWNoIGNsdXN0ZXJpbmcgaXMgdG8gYmUgYXBwbGllZAogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNhdGVnb3JpY2FsX2ZlYXR1cmU9W10pOgogICAgICAgIHNlbGYuZmVhdHVyZSA9IGNhdGVnb3JpY2FsX2ZlYXR1cmUKCiAgICBkZWYgZml0KHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgc2VsZi5maXRfdHJhbnNmb3JtKFgsIHk9eSkKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiB0cmFuc2Zvcm0oc2VsZiwgWCwgeT1Ob25lKToKICAgICAgICBkYXRhID0gWAogICAgICAgICMgd2UgYWxyZWFkeSBrbm93IGxldmVsIGNvdW50cwogICAgICAgIGZvciBpLCB6LCBrIGluIHppcChzZWxmLmZlYXR1cmUsIHNlbGYucGhfZGF0YSwgc2VsZi5waF91KToKICAgICAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0ucmVwbGFjZShrLCB6WyJjb3VudHMiXSkKICAgICAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uYXN0eXBlKCJmbG9hdDMyIikKCiAgICAgICAgcmV0dXJuIGRhdGEKCiAgICBkZWYgZml0X3RyYW5zZm9ybShzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIGRhdGEgPSBYCiAgICAgICAgIwogICAgICAgIHNlbGYucGhfZGF0YSA9IFtdCiAgICAgICAgc2VsZi5waF91ID0gW10KICAgICAgICBmb3IgaSBpbiBzZWxmLmZlYXR1cmU6CiAgICAgICAgICAgIGRhdGFfdDEgPSBwZC5EYXRhRnJhbWUoCiAgICAgICAgICAgICAgICBkaWN0KAogICAgICAgICAgICAgICAgICAgIGxldmVscz1kYXRhW2ldLmdyb3VwYnkoZGF0YVtpXSwgc29ydD1GYWxzZSkuY291bnQoKS5pbmRleCwKICAgICAgICAgICAgICAgICAgICBjb3VudHM9ZGF0YVtpXS5ncm91cGJ5KGRhdGFbaV0sIHNvcnQ9RmFsc2UpLmNvdW50KCkudmFsdWVzLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIHUgPSBkYXRhW2ldLnVuaXF1ZSgpCiAgICAgICAgICAgICMgcmVwbGFjZSBsZXZlbHMgd2l0aCBjb3VudHMKICAgICAgICAgICAgZGF0YVtpXS5yZXBsYWNlKHUsIGRhdGFfdDFbImNvdW50cyJdLCBpbnBsYWNlPVRydWUpCiAgICAgICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLmFzdHlwZSgiZmxvYXQzMiIpCiAgICAgICAgICAgIHNlbGYucGhfZGF0YS5hcHBlbmQoZGF0YV90MSkKICAgICAgICAgICAgc2VsZi5waF91LmFwcGVuZCh1KQoKICAgICAgICByZXR1cm4gZGF0YQoKCmNsYXNzIE1ha2VfTm9uTGluZWFyX0ZlYXR1cmVzKEJhc2VFc3RpbWF0b3IsIFRyYW5zZm9ybWVyTWl4aW4pOgogICAgIiIiCiAgICAtIGNvbnZlcnQgbnVtZXJpY2FsIGZlYXR1cmVzIGludG8gcG9seW5vbWlhbCBmZWF0dXJlcwogICAgLSBpdCBpcyBISUdITFkgcmVjb21tZW5kZWQgdG8gcnVuIHRoZSBBdXRvaW5mZXJfRGF0YV9UeXBlIGNsYXNzIGZpcnN0CiAgICAtIElnbm9yZXMgdGFyZ2V0IHZhcmlhYmxlCiAgICAtIGl0IHBpY2tzIHVwIGRhdGEgdHlwZSBmbG9hdDMyIGFzIG51bWVyaWNhbAogICAgLSBmb3IgbXVsdGljbGFzcyBjbGFzc2lmaWNhdGlvbiBwcm9ibGVtICwgc2V0IHN1YmNsYXNzIGFyZyB0byAnbXVsdGknCgogICAgICBBcmdzOgogICAgICAgIHRhcmdldDogc3RyaW5nICwgbmFtZSBvZiB0aGUgdGFyZ2V0IHZhcmlhYmxlCiAgICAgICAgUG9seW5vbWlhbF9kZWdyZWU6IGludCAsZGVmYXVsdCAyCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oCiAgICAgICAgICAgIHNlbGYsCiAgICAgICAgICAgIFBvbHlub21pYWxfZGVncmVlPTIsCiAgICAgICAgICAgIG90aGVyX25vbmxpbmVyX2ZlYXR1cmVzPVsic2luIiwgImNvcyIsICJ0YW4iXSwKICAgICAgICAgICAgdG9wX2ZlYXR1cmVzX3RvX3BpY2s9MC4yMCwKICAgICAgICAgICAgcmFuZG9tX3N0YXRlPXJhbmRvbV9zdGF0ZSwKICAgICAgICAgICAgc3ViY2xhc3M9Imlnbm9yZSIsCiAgICAgICAgICAgIG5fam9icz0xLAogICAgKToKICAgICAgICBzZWxmLlBvbHlub21pYWxfZGVncmVlID0gUG9seW5vbWlhbF9kZWdyZWUKICAgICAgICBzZWxmLm90aGVyX25vbmxpbmVyX2ZlYXR1cmVzID0gb3RoZXJfbm9ubGluZXJfZmVhdHVyZXMKICAgICAgICBzZWxmLnRvcF9mZWF0dXJlc190b19waWNrID0gdG9wX2ZlYXR1cmVzX3RvX3BpY2sKICAgICAgICBzZWxmLnJhbmRvbV9zdGF0ZSA9IHJhbmRvbV9zdGF0ZQogICAgICAgIHNlbGYuc3ViY2xhc3MgPSBzdWJjbGFzcwogICAgICAgIHNlbGYubl9qb2JzID0gbl9qb2JzCgogICAgZGVmIGZpdChzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIHNlbGYuZml0X3RyYW5zZm9ybShYLCB5PXkpCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6ICAjIHNhbWUgYXBwbGljYXRpb24gZm9yIHRlc3QgYW5kIHRyYWluCiAgICAgICAgZGF0YSA9IFgKCiAgICAgICAgc2VsZi5udW1lcmljX2NvbHVtbnMgPSBkYXRhLnNlbGVjdF9kdHlwZXMoaW5jbHVkZT0iZmxvYXQzMiIpLmNvbHVtbnMKICAgICAgICBpZiBzZWxmLlBvbHlub21pYWxfZGVncmVlID49IDI6ICAjIGRvbnQgcnVuIGFueXRoaW5nIGlmIHBvd3IgaXMgbGVzIHRoYW4gMgogICAgICAgICAgICAjIHNlbGYubnVtZXJpY19jb2x1bW5zID0gZGF0YS5kcm9wKHNlbGYudGFyZ2V0LGF4aXM9MSxlcnJvcnM9J2lnbm9yZScpLnNlbGVjdF9kdHlwZXMoaW5jbHVkZT0iZmxvYXQzMiIpLmNvbHVtbnMKICAgICAgICAgICAgIyBzdGFydCB0YWtpbmcgcG93ZXJzCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDIsIHNlbGYuUG9seW5vbWlhbF9kZWdyZWUgKyAxKToKICAgICAgICAgICAgICAgIGRkY19wb3dlciA9IG5wLnBvd2VyKGRhdGFbc2VsZi5udW1lcmljX2NvbHVtbnNdLCBpKQogICAgICAgICAgICAgICAgZGRjX2NvbCA9IGxpc3QoZGRjX3Bvd2VyLmNvbHVtbnMpCiAgICAgICAgICAgICAgICBpaSA9IHN0cihpKQogICAgICAgICAgICAgICAgZGRjX2NvbCA9IFtkZGNfY29sICsgIl9Qb3dlciIgKyBpaSBmb3IgZGRjX2NvbCBpbiBkZGNfY29sXQogICAgICAgICAgICAgICAgZGRjX3Bvd2VyLmNvbHVtbnMgPSBkZGNfY29sCiAgICAgICAgICAgICAgICAjIHB1dCBpdCBiYWNrIHdpdGggZGF0YSBkdW1teQogICAgICAgICAgICAgICAgIyBkYXRhID0gcGQuY29uY2F0KChkYXRhLGRkY19wb3dlciksYXhpcz0xKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRkY19wb3dlciA9IHBkLkRhdGFGcmFtZSgpCgogICAgICAgICMgdGFrZSBzaW46CiAgICAgICAgaWYgInNpbiIgaW4gc2VsZi5vdGhlcl9ub25saW5lcl9mZWF0dXJlczoKICAgICAgICAgICAgZGRjX3NpbiA9IG5wLnNpbihkYXRhW3NlbGYubnVtZXJpY19jb2x1bW5zXSkKICAgICAgICAgICAgZGRjX2NvbCA9IGxpc3QoZGRjX3Npbi5jb2x1bW5zKQogICAgICAgICAgICBkZGNfY29sID0gWyJzaW4oIiArIGkgKyAiKSIgZm9yIGkgaW4gZGRjX2NvbF0KICAgICAgICAgICAgZGRjX3Npbi5jb2x1bW5zID0gZGRjX2NvbAogICAgICAgICAgICAjIHB1dCBpdCBiYWNrIHdpdGggZGF0YSBkdW1teQogICAgICAgICAgICAjIGRhdGEgPSBwZC5jb25jYXQoKGRhdGEsZGRjX3NpbiksYXhpcz0xKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRkY19zaW4gPSBwZC5EYXRhRnJhbWUoKQoKICAgICAgICAjIHRha2UgY29zOgogICAgICAgIGlmICJjb3MiIGluIHNlbGYub3RoZXJfbm9ubGluZXJfZmVhdHVyZXM6CiAgICAgICAgICAgIGRkY19jb3MgPSBucC5jb3MoZGF0YVtzZWxmLm51bWVyaWNfY29sdW1uc10pCiAgICAgICAgICAgIGRkY19jb2wgPSBsaXN0KGRkY19jb3MuY29sdW1ucykKICAgICAgICAgICAgZGRjX2NvbCA9IFsiY29zKCIgKyBpICsgIikiIGZvciBpIGluIGRkY19jb2xdCiAgICAgICAgICAgIGRkY19jb3MuY29sdW1ucyA9IGRkY19jb2wKICAgICAgICAgICAgIyBwdXQgaXQgYmFjayB3aXRoIGRhdGEgZHVtbXkKICAgICAgICAgICAgIyBkYXRhID0gcGQuY29uY2F0KChkYXRhLGRkY19jb3MpLGF4aXM9MSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkZGNfY29zID0gcGQuRGF0YUZyYW1lKCkKCiAgICAgICAgIyB0YWtlIHRhbjoKICAgICAgICBpZiAidGFuIiBpbiBzZWxmLm90aGVyX25vbmxpbmVyX2ZlYXR1cmVzOgogICAgICAgICAgICBkZGNfdGFuID0gbnAudGFuKGRhdGFbc2VsZi5udW1lcmljX2NvbHVtbnNdKQogICAgICAgICAgICBkZGNfY29sID0gbGlzdChkZGNfdGFuLmNvbHVtbnMpCiAgICAgICAgICAgIGRkY19jb2wgPSBbInRhbigiICsgaSArICIpIiBmb3IgaSBpbiBkZGNfY29sXQogICAgICAgICAgICBkZGNfdGFuLmNvbHVtbnMgPSBkZGNfY29sCiAgICAgICAgICAgICMgcHV0IGl0IGJhY2sgd2l0aCBkYXRhIGR1bW15CiAgICAgICAgICAgICMgZGF0YSA9IHBkLmNvbmNhdCgoZGF0YSxkZGNfdGFuKSxheGlzPTEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGRjX3RhbiA9IHBkLkRhdGFGcmFtZSgpCgogICAgICAgICMgZHVtbXlfYWxsCiAgICAgICAgZHVtbXlfYWxsID0gcGQuY29uY2F0KChkYXRhLCBkZGNfcG93ZXIsIGRkY19zaW4sIGRkY19jb3MsIGRkY190YW4pLCBheGlzPTEpCiAgICAgICAgIyB3ZSBjYW4gc2VsZWN0IHRvcCBmZWF0dXJlcyB1c2luZyBSRgogICAgICAgICMgIyBhbmQgd2Ugb25seSB3YW50IHRvIGRvIHRoaXMgaWYgdGhlIGR1bW15IGFsbCBoYXZlIG1vcmUgdGhhbiA1MCBmZWF0dXJlcwogICAgICAgICMgaWYgbGVuKGR1bW15X2FsbC5jb2x1bW5zKSA+IDcxOgoKICAgICAgICBkdW1teV9hbGwgPSBkdW1teV9hbGxbc2VsZi5jb2x1bW5zX3RvX2tlZXBdCiAgICAgICAgcmV0dXJuIGR1bW15X2FsbAoKICAgIGRlZiBmaXRfdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CgogICAgICAgIGRhdGEgPSBYCgogICAgICAgIHNlbGYubnVtZXJpY19jb2x1bW5zID0gZGF0YS5zZWxlY3RfZHR5cGVzKGluY2x1ZGU9ImZsb2F0MzIiKS5jb2x1bW5zCiAgICAgICAgaWYgc2VsZi5Qb2x5bm9taWFsX2RlZ3JlZSA+PSAyOiAgIyBkb250IHJ1biBhbnl0aGluZyBpZiBwb3dyIGlzIGxlcyB0aGFuIDIKICAgICAgICAgICAgIyBzZWxmLm51bWVyaWNfY29sdW1ucyA9IGRhdGEuZHJvcChzZWxmLnRhcmdldCxheGlzPTEsZXJyb3JzPSdpZ25vcmUnKS5zZWxlY3RfZHR5cGVzKGluY2x1ZGU9ImZsb2F0MzIiKS5jb2x1bW5zCiAgICAgICAgICAgICMgc3RhcnQgdGFraW5nIHBvd2VycwogICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgyLCBzZWxmLlBvbHlub21pYWxfZGVncmVlICsgMSk6CiAgICAgICAgICAgICAgICBkZGNfcG93ZXIgPSBucC5wb3dlcihkYXRhW3NlbGYubnVtZXJpY19jb2x1bW5zXSwgaSkKICAgICAgICAgICAgICAgIGRkY19jb2wgPSBsaXN0KGRkY19wb3dlci5jb2x1bW5zKQogICAgICAgICAgICAgICAgaWkgPSBzdHIoaSkKICAgICAgICAgICAgICAgIGRkY19jb2wgPSBbZGRjX2NvbCArICJfUG93ZXIiICsgaWkgZm9yIGRkY19jb2wgaW4gZGRjX2NvbF0KICAgICAgICAgICAgICAgIGRkY19wb3dlci5jb2x1bW5zID0gZGRjX2NvbAogICAgICAgICAgICAgICAgIyBwdXQgaXQgYmFjayB3aXRoIGRhdGEgZHVtbXkKICAgICAgICAgICAgICAgICMgZGF0YSA9IHBkLmNvbmNhdCgoZGF0YSxkZGNfcG93ZXIpLGF4aXM9MSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkZGNfcG93ZXIgPSBwZC5EYXRhRnJhbWUoKQoKICAgICAgICAjIHRha2Ugc2luOgogICAgICAgIGlmICJzaW4iIGluIHNlbGYub3RoZXJfbm9ubGluZXJfZmVhdHVyZXM6CiAgICAgICAgICAgIGRkY19zaW4gPSBucC5zaW4oZGF0YVtzZWxmLm51bWVyaWNfY29sdW1uc10pCiAgICAgICAgICAgIGRkY19jb2wgPSBsaXN0KGRkY19zaW4uY29sdW1ucykKICAgICAgICAgICAgZGRjX2NvbCA9IFsic2luKCIgKyBpICsgIikiIGZvciBpIGluIGRkY19jb2xdCiAgICAgICAgICAgIGRkY19zaW4uY29sdW1ucyA9IGRkY19jb2wKICAgICAgICAgICAgIyBwdXQgaXQgYmFjayB3aXRoIGRhdGEgZHVtbXkKICAgICAgICAgICAgIyBkYXRhID0gcGQuY29uY2F0KChkYXRhLGRkY19zaW4pLGF4aXM9MSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkZGNfc2luID0gcGQuRGF0YUZyYW1lKCkKCiAgICAgICAgIyB0YWtlIGNvczoKICAgICAgICBpZiAiY29zIiBpbiBzZWxmLm90aGVyX25vbmxpbmVyX2ZlYXR1cmVzOgogICAgICAgICAgICBkZGNfY29zID0gbnAuY29zKGRhdGFbc2VsZi5udW1lcmljX2NvbHVtbnNdKQogICAgICAgICAgICBkZGNfY29sID0gbGlzdChkZGNfY29zLmNvbHVtbnMpCiAgICAgICAgICAgIGRkY19jb2wgPSBbImNvcygiICsgaSArICIpIiBmb3IgaSBpbiBkZGNfY29sXQogICAgICAgICAgICBkZGNfY29zLmNvbHVtbnMgPSBkZGNfY29sCiAgICAgICAgICAgICMgcHV0IGl0IGJhY2sgd2l0aCBkYXRhIGR1bW15CiAgICAgICAgICAgICMgZGF0YSA9IHBkLmNvbmNhdCgoZGF0YSxkZGNfY29zKSxheGlzPTEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGRjX2NvcyA9IHBkLkRhdGFGcmFtZSgpCgogICAgICAgICMgdGFrZSB0YW46CiAgICAgICAgaWYgInRhbiIgaW4gc2VsZi5vdGhlcl9ub25saW5lcl9mZWF0dXJlczoKICAgICAgICAgICAgZGRjX3RhbiA9IG5wLnRhbihkYXRhW3NlbGYubnVtZXJpY19jb2x1bW5zXSkKICAgICAgICAgICAgZGRjX2NvbCA9IGxpc3QoZGRjX3Rhbi5jb2x1bW5zKQogICAgICAgICAgICBkZGNfY29sID0gWyJ0YW4oIiArIGkgKyAiKSIgZm9yIGkgaW4gZGRjX2NvbF0KICAgICAgICAgICAgZGRjX3Rhbi5jb2x1bW5zID0gZGRjX2NvbAogICAgICAgICAgICAjIHB1dCBpdCBiYWNrIHdpdGggZGF0YSBkdW1teQogICAgICAgICAgICAjIGRhdGEgPSBwZC5jb25jYXQoKGRhdGEsZGRjX3RhbiksYXhpcz0xKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRkY190YW4gPSBwZC5EYXRhRnJhbWUoKQoKICAgICAgICAjIGR1bW15X2FsbAogICAgICAgIGR1bW15X2FsbCA9IHBkLmNvbmNhdCgoZGRjX3Bvd2VyLCBkZGNfc2luLCBkZGNfY29zLCBkZGNfdGFuKSwgYXhpcz0xKQogICAgICAgICMgd2UgY2FuIHNlbGVjdCB0b3AgZmVhdHVyZXMgdXNpbmcgb3VyIEZlYXR1cmUgU2VsZWN0aW9uIENsYXNzaWMgdHJhbnNmb3JtZXIKICAgICAgICBhZnMgPSBGZWF0dXJlU2VsZWN0b3IoCiAgICAgICAgICAgIHJmPVRydWUsCiAgICAgICAgICAgIG5fZXN0aW1hdG9ycz0xMDAsCiAgICAgICAgICAgIHJmX2NvbHM9MjAsCiAgICAgICAgICAgIGxnYm1yPUZhbHNlLAogICAgICAgICAgICBjb3JyPUZhbHNlLAogICAgICAgICAgICBjb3JyX2NvbHM9MjAsCiAgICAgICAgICAgIGNvcnJfdGhyZXM9MC4yLAogICAgICAgICAgICByYW5kb21fc3RhdGU9cmFuZG9tX3N0YXRlLAogICAgICAgICkKICAgICAgICBkdW1teV9hbGxfdCA9IGFmcy5maXRfdHJhbnNmb3JtKGR1bW15X2FsbCwgeSkKCiAgICAgICAgZGF0YSA9IHBkLmNvbmNhdCgoZGF0YSwgZHVtbXlfYWxsX3QpLCBheGlzPTEpCiAgICAgICAgIyAjIG1ha2luZyBzdXJlIG5vIGR1cGxpY2F0ZWQgY29sdW1ucyBhcmUgdGhlcmUKICAgICAgICBkYXRhID0gZGF0YS5sb2NbOiwgfmRhdGEuY29sdW1ucy5kdXBsaWNhdGVkKCldCiAgICAgICAgc2VsZi5jb2x1bW5zX3RvX2tlZXAgPSBkYXRhLmNvbHVtbnMKICAgICAgICByZXR1cm4gZGF0YQoKCiMgQ2x1c3RlcmluZyBlbnRpcmUgZGF0YQpjbGFzcyBDbHVzdGVyX0VudGlyZV9EYXRhKEJhc2VFc3RpbWF0b3IsIFRyYW5zZm9ybWVyTWl4aW4pOgogICAgIiIiCiAgICAtIEFwcGxpZXMga21lYW5zIGNsdXN0ZXJpbmcgdG8gdGhlIGVudGlyZSBkYXRhIHNldCBhbmQgcHJvZHVjZSBjbHVzdGVycwogICAgLSBIaWdobHkgcmVjb21tZW5kZWQgdG8gcnVuIHRoZSBEYXRhVHlwZXNfQXV0b19pbmZlciBjbGFzcyBmaXJzdAogICAgICBBcmdzOgogICAgICAgICAgdGFyZ2V0X3ZhcmlhYmxlOiB0YXJnZXQgdmFyaWFibGUgKGludGVnZXIgb3IgbnVtZXJpY2FsIG9ubHkpCiAgICAgICAgICBjaGVja19jbHVzdGVyc191cHRvOiB0byBkZXRlcm1pbmUgb3B0aW11bSBudW1iZXIgb2Yga21lYW5zIGNsdXN0ZXJzLCBzZXQgdGhlIHVwcGxlciBsaW1pdCBvZiBjbHVzdGVycwogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNoZWNrX2NsdXN0ZXJzX3VwdG89MjAsIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUpOgogICAgICAgIHNlbGYuY2hlY2tfY2x1c3RlcnMgPSBjaGVja19jbHVzdGVyc191cHRvICsgMQogICAgICAgIHNlbGYucmFuZG9tX3N0YXRlID0gcmFuZG9tX3N0YXRlCgogICAgZGVmIGZpdChzZWxmLCBYLCB5PU5vbmUpOgogICAgICAgIHNlbGYuZml0X3RyYW5zZm9ybShYLCB5PXkpCiAgICAgICAgcmV0dXJuIHNlbGYKCiAgICBkZWYgdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgZGF0YSA9IFgKICAgICAgICBkYXRhID0gZGF0YQogICAgICAgICMgZmlyc3QgY29udmVydCB0byBkdW1teQogICAgICAgIGlmIGxlbihkYXRhLnNlbGVjdF9kdHlwZXMoaW5jbHVkZT0ib2JqZWN0IikuY29sdW1ucykgPiAwOgogICAgICAgICAgICBkYXRhX3QxID0gc2VsZi5kdW1teS50cmFuc2Zvcm0oZGF0YSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBkYXRhX3QxID0gZGF0YQoKICAgICAgICAjICMgIyBub3cgbWFrZSBQTFMKICAgICAgICAjICMgZGF0YV90MSA9IHNlbGYucGxzLnRyYW5zZm9ybShkYXRhX3QxKQogICAgICAgICMgIyBkYXRhX3QxID0gc2VsZi5wY2EudHJhbnNmb3JtKGRhdGFfdDEpCiAgICAgICAgIyAjIG5vdyBwcmVkaWN0IHdpdGggdGhlIGNsdXN0ZXMKICAgICAgICBwcmVkaWN0ID0gcGQuRGF0YUZyYW1lKHNlbGYua19vYmplY3QucHJlZGljdChkYXRhX3QxKSwgaW5kZXg9ZGF0YS5pbmRleCkKICAgICAgICBkYXRhWyJkYXRhX2NsdXN0ZXIiXSA9IHByZWRpY3QKICAgICAgICBkYXRhWyJkYXRhX2NsdXN0ZXIiXSA9IGRhdGFbImRhdGFfY2x1c3RlciJdLmFzdHlwZSgib2JqZWN0IikKICAgICAgICByZXR1cm4gZGF0YQoKICAgIGRlZiBmaXRfdHJhbnNmb3JtKHNlbGYsIFgsIHk9Tm9uZSk6CiAgICAgICAgZGF0YSA9IFguY29weSgpCiAgICAgICAgIyBmaXJzdCBjb252ZXJ0IHRvIGR1bW15IChpZiB0aGVyZSBhcmUgb2JqZWN0cyBpbiBkYXRhIHNldCkKICAgICAgICBpZiBsZW4oZGF0YS5zZWxlY3RfZHR5cGVzKGluY2x1ZGU9Im9iamVjdCIpLmNvbHVtbnMpID4gMDoKICAgICAgICAgICAgc2VsZi5kdW1teSA9IER1bW1pZnkoeSkKICAgICAgICAgICAgZGF0YV90MSA9IHNlbGYuZHVtbXkuZml0X3RyYW5zZm9ybShkYXRhKQogICAgICAgICAgICBkYXRhX3QxID0gZGF0YV90MQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRhdGFfdDEgPSBkYXRhCgogICAgICAgICMgbm93IG1ha2UgUExTCiAgICAgICAgIyBzZWxmLnBscyA9IFBMU1JlZ3Jlc3Npb24obl9jb21wb25lbnRzPWxlbihkYXRhX3QxLmNvbHVtbnMpLTEpCiAgICAgICAgIyBkYXRhX3QxID0gc2VsZi5wbHMuZml0X3RyYW5zZm9ybShkYXRhX3QxLmRyb3Aoc2VsZi50YXJnZXQsYXhpcz0xKSxkYXRhX3QxW3NlbGYudGFyZ2V0XSlbMF0KICAgICAgICAjIHNlbGYucGNhID0gUENBKG5fY29tcG9uZW50cz1sZW4oZGF0YV90MS5jb2x1bW5zKS0xKQogICAgICAgICMgZGF0YV90MSA9IHNlbGYucGNhLmZpdF90cmFuc2Zvcm0oZGF0YV90MS5kcm9wKHNlbGYudGFyZ2V0LGF4aXM9MSkpCgogICAgICAgICMgd2UgYXJlIGdvaWduIHRvIG1ha2UgYSBwbGFjZSBob2xkZXIgLCBmb3IgMiB0byAyMCBjbHVzdGVycwogICAgICAgIHNlbGYucGggPSBwZC5EYXRhRnJhbWUoCiAgICAgICAgICAgIG5wLmFyYW5nZSgyLCBzZWxmLmNoZWNrX2NsdXN0ZXJzLCAxKSwgY29sdW1ucz1bImNsdXN0ZXJzIl0KICAgICAgICApCiAgICAgICAgc2VsZi5waFsiU2lsaG91ZXR0ZSJdID0gZmxvYXQoMCkKICAgICAgICBzZWxmLnBoWyJjYWxpbnNraSJdID0gZmxvYXQoMCkKCiAgICAgICAgIyBOb3cgc3RhcnQgbWFraW5nIGNsdXN0ZXJzCiAgICAgICAgZm9yIGsgaW4gc2VsZi5waC5pbmRleDoKICAgICAgICAgICAgYyA9IHNlbGYucGhbImNsdXN0ZXJzIl1ba10KICAgICAgICAgICAgc2VsZi5rX29iamVjdCA9IGNsdXN0ZXIuS01lYW5zKAogICAgICAgICAgICAgICAgbl9jbHVzdGVycz1jLAogICAgICAgICAgICAgICAgaW5pdD0iay1tZWFucysrIiwKICAgICAgICAgICAgICAgIHByZWNvbXB1dGVfZGlzdGFuY2VzPSJhdXRvIiwKICAgICAgICAgICAgICAgIG5faW5pdD0xMCwKICAgICAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1zZWxmLnJhbmRvbV9zdGF0ZSwKICAgICAgICAgICAgKQogICAgICAgICAgICBzZWxmLmtfb2JqZWN0LmZpdChkYXRhX3QxKQogICAgICAgICAgICBzZWxmLnBoLmlsb2NbaywgMV0gPSBtZXRyaWNzLnNpbGhvdWV0dGVfc2NvcmUoCiAgICAgICAgICAgICAgICBkYXRhX3QxLCBzZWxmLmtfb2JqZWN0LmxhYmVsc18KICAgICAgICAgICAgKQogICAgICAgICAgICBzZWxmLnBoLmlsb2NbaywgMl0gPSBtZXRyaWNzLmNhbGluc2tpX2hhcmFiYXN6X3Njb3JlKAogICAgICAgICAgICAgICAgZGF0YV90MSwgc2VsZi5rX29iamVjdC5sYWJlbHNfCiAgICAgICAgICAgICkKCiAgICAgICAgIyBub3cgc3RhbmRhcmRpemUgdGhlIHNjb3JlcyBhbmQgbWFrZSBhIHRvdGFsIGNvbHVtbgogICAgICAgIG0gPSBNaW5NYXhTY2FsZXIoKC0xLCAxKSkKICAgICAgICBzZWxmLnBoWyJjYWxpbnNraSJdID0gbS5maXRfdHJhbnNmb3JtKAogICAgICAgICAgICBucC5hcnJheShzZWxmLnBoWyJjYWxpbnNraSJdKS5yZXNoYXBlKC0xLCAxKQogICAgICAgICkKICAgICAgICBzZWxmLnBoWyJTaWxob3VldHRlIl0gPSBtLmZpdF90cmFuc2Zvcm0oCiAgICAgICAgICAgIG5wLmFycmF5KHNlbGYucGhbIlNpbGhvdWV0dGUiXSkucmVzaGFwZSgtMSwgMSkKICAgICAgICApCiAgICAgICAgc2VsZi5waFsidG90YWwiXSA9IHNlbGYucGhbIlNpbGhvdWV0dGUiXSArIHNlbGYucGhbImNhbGluc2tpIl0KICAgICAgICAjIHNvcnQgaXQgYnkgdG90YWwgY29sdW1uIGFuZCB0YWtlIHRoZSBmaXJzdCByb3cgY29sdW1uIDAgLCB0aGF0IHdvdWxkIHJlcHJlc2VudCB0aGUgb3B0aW1hbCBjbHVzdGVycwogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5jbHVzdGVycyA9IGludCgKICAgICAgICAgICAgICAgIHNlbGYucGhbc2VsZi5waFsidG90YWwiXSA9PSBtYXgoc2VsZi5waFsidG90YWwiXSldWyJjbHVzdGVycyJdCiAgICAgICAgICAgICkKICAgICAgICBleGNlcHQ6ICAjIGluIGNhc2UgdGhlcmUgaXNudCBhIGRlY2lzaXZlIG1lYXN1cmUgLCB0YWtlIGNhbGluc2tpIGFzIHllYXJkIHN0aWNrCiAgICAgICAgICAgIHNlbGYuY2x1c3RlcnMgPSBpbnQoCiAgICAgICAgICAgICAgICBzZWxmLnBoW3NlbGYucGhbImNhbGluc2tpIl0gPT0gbWF4KHNlbGYucGhbImNhbGluc2tpIl0pXVsiY2x1c3RlcnMiXQogICAgICAgICAgICApCiAgICAgICAgIyBOb3cgbWFrZSB0aGUgZmluYWwgY2x1c3RlciBvYmplY3QKICAgICAgICBzZWxmLmtfb2JqZWN0ID0gY2x1c3Rlci5LTWVhbnMoCiAgICAgICAgICAgIG5fY2x1c3RlcnM9c2VsZi5jbHVzdGVycywKICAgICAgICAgICAgaW5pdD0iay1tZWFucysrIiwKICAgICAgICAgICAgcHJlY29tcHV0ZV9kaXN0YW5jZXM9ImF1dG8iLAogICAgICAgICAgICBuX2luaXQ9MTAsCiAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1zZWxmLnJhbmRvbV9zdGF0ZSwKICAgICAgICApCiAgICAgICAgIyBub3cgZG8gZml0IHByZWRpY3QKICAgICAgICBwcmVkaWN0ID0gcGQuRGF0YUZyYW1lKHNlbGYua19vYmplY3QuZml0X3ByZWRpY3QoZGF0YV90MSksIGluZGV4PWRhdGEuaW5kZXgpCiAgICAgICAgZGF0YVsiZGF0YV9jbHVzdGVyIl0gPSBwcmVkaWN0CiAgICAgICAgZGF0YVsiZGF0YV9jbHVzdGVyIl0gPSBkYXRhWyJkYXRhX2NsdXN0ZXIiXS5hc3R5cGUoIm9iamVjdCIpCgogICAgICAgIHJldHVybiBkYXRhCgoKZGVmIFByZXByb2Nlc3NvcihsYWJlbF9lbmM9RmFsc2UsCiAgICAgICAgICAgICAgICAgaXRlcmF0aXZlX2ltcHV0ZXI9RmFsc2UsCiAgICAgICAgICAgICAgICAgYXBwbHlfY2FyZGluYWxpdHlfcmVkdWN0aW9uPVRydWUsCiAgICAgICAgICAgICAgICAgY2FyZGluYWxfbWV0aG9kPSJjbHVzdGVyIiwKICAgICAgICAgICAgICAgICBjYXJkaW5hbF9mZWF0dXJlcz1bXSwKICAgICAgICAgICAgICAgICBhcHBseV9aZXJvX05lYXJaZXJvX1ZhcmlhbmNlPUZhbHNlLAogICAgICAgICAgICAgICAgIGNsdWJfcmFyZV9sZXZlbHM9RmFsc2UsCiAgICAgICAgICAgICAgICAgcmFyZV9sZXZlbF90aHJlc2hvbGRfcGVyY2VudGFnZT0wLjA1LAogICAgICAgICAgICAgICAgIGFwcGx5X3VudHJhaW5lZF9sZXZlbHNfdHJlYXRtZW50PUZhbHNlLAogICAgICAgICAgICAgICAgIHVudHJhaW5lZF9sZXZlbHNfdHJlYXRtZW50X21ldGhvZD0ibGVhc3QgZnJlcXVlbnQiLAogICAgICAgICAgICAgICAgIG5vbl9saW5lYXJfZmVhdHVyZXM9RmFsc2UsCiAgICAgICAgICAgICAgICAgYXBwbHlfYmlubmluZz1GYWxzZSwKICAgICAgICAgICAgICAgICBmZWF0dXJlc190b19iaW5uPVtdLAogICAgICAgICAgICAgICAgIHJlbW92ZV9vdXRsaWVycz1GYWxzZSwKICAgICAgICAgICAgICAgICBmZWF0dXJlX2dlbmVyYXRvcj1GYWxzZSwKICAgICAgICAgICAgICAgICBjbHVzdGVyX2VudGlyZV9kYXRhPUZhbHNlLAogICAgICAgICAgICAgICAgIHJhbmdlX29mX2NsdXN0ZXJzX3RvX3RyeT0yMCwKICAgICAgICAgICAgICAgICBmZWF0dXJlX3NlbGVjdG9yPVRydWUsCiAgICAgICAgICAgICAgICAgcmFuZG9tX3N0YXRlPXJhbmRvbV9zdGF0ZSwKICAgICAgICAgICAgICAgICApOgogICAgaWYgaXRlcmF0aXZlX2ltcHV0ZXI6CiAgICAgICAgaW1wdXRlciA9IEl0ZXJhdGl2ZV9JbXB1dGVyKHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUpCiAgICBlbHNlOgogICAgICAgIGltcHV0ZXIgPSAicGFzc3Rocm91Z2giCgogICAgIyB1bnRyYWluZWQgbGV2ZWxzIGluIHRlc3Qob3JkaW5hbCBzcGVjaWZpYykKICAgIGlmIGFwcGx5X3VudHJhaW5lZF9sZXZlbHNfdHJlYXRtZW50ID09IFRydWU6CiAgICAgICAgbmV3X2xldmVsczEgPSBOZXdfY2F0ZWdvcmljYWxfTGV2ZWxzX2luX1Rlc3REYXRhKAogICAgICAgICAgICByZXBsYWNlbWVudF9zdHJhdGVneT11bnRyYWluZWRfbGV2ZWxzX3RyZWF0bWVudF9tZXRob2QsCiAgICAgICAgKQogICAgZWxzZToKICAgICAgICBuZXdfbGV2ZWxzMSA9IE5ld19jYXRlZ29yaWNhbF9MZXZlbHNfaW5fVGVzdERhdGEoCiAgICAgICAgICAgIHJlcGxhY2VtZW50X3N0cmF0ZWd5PSJyYWlzZSBleGNlcHRpb24iLAogICAgICAgICkKCiAgICAjICAgICAjY2FyZGluYWxpdHkgcmVkdWN0aW9uCiAgICAjICAgICBpZiBhcHBseV9jYXJkaW5hbGl0eV9yZWR1Y3Rpb24gPT0gVHJ1ZSBhbmQgY2FyZGluYWxfbWV0aG9kID09ICJjbHVzdGVyIjoKICAgICMgICAgICAgICBjYXJkaW5hbGl0eSA9IFJlZHVjZV9DYXJkaW5hbGl0eV93aXRoX0NsdXN0ZXJpbmcoCiAgICAjICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpY2FsX2ZlYXR1cmU9Y2FyZGluYWxfZmVhdHVyZXMsCiAgICAjICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX2NsdXN0ZXJzX3VwdG89NTAsCiAgICAjICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUsCiAgICAjICAgICAgICAgKQogICAgIyAgICAgZWxpZiBhcHBseV9jYXJkaW5hbGl0eV9yZWR1Y3Rpb24gPT0gVHJ1ZSBhbmQgY2FyZGluYWxfbWV0aG9kID09ICJjb3VudCI6CiAgICAjICAgICAgICAgY2FyZGluYWxpdHkgPSBSZWR1Y2VfQ2FyZGluYWxpdHlfd2l0aF9Db3VudHMoCiAgICAjICAgICAgICAgICAgIGNhdGVnb3JpY2FsX2ZlYXR1cmU9Y2FyZGluYWxfZmVhdHVyZXMKICAgICMgICAgICAgICApCiAgICAjICAgICBlbHNlOgogICAgIyAgICAgICAgIGNhcmRpbmFsaXR5ID0gJ3Bhc3N0aHJvdWdoJwoKICAgICMgemVybyBuZWFyIHplcm8gdmFyaWFuY2UKICAgIGlmIGFwcGx5X1plcm9fTmVhclplcm9fVmFyaWFuY2U6CiAgICAgICAgemVybyA9IFplcm9fTmVhclplcm9fVmFyaWFuY2UoKQogICAgZWxzZToKICAgICAgICB6ZXJvID0gInBhc3N0aHJvdWdoIgoKICAgICMgY2x1YiByYXJlIGxldmVscwogICAgaWYgY2x1Yl9yYXJlX2xldmVscyA9PSBUcnVlOgogICAgICAgIGNsdWJfUl9MID0gQ2F0ZWdvcmljYWxfdmFyaWFibGVzX1dpdGhfUmFyZV9sZXZlbHMoCiAgICAgICAgICAgIHRocmVzaG9sZD1yYXJlX2xldmVsX3RocmVzaG9sZF9wZXJjZW50YWdlCiAgICAgICAgKQogICAgZWxzZToKICAgICAgICBjbHViX1JfTCA9ICJwYXNzdGhyb3VnaCIKCiAgICAjIHVudHJhaW5lZCBsZXZlbHMgaW4gdGVzdAogICAgaWYgYXBwbHlfdW50cmFpbmVkX2xldmVsc190cmVhdG1lbnQgPT0gVHJ1ZToKICAgICAgICBuZXdfbGV2ZWxzID0gTmV3X2NhdGVnb3JpY2FsX0xldmVsc19pbl9UZXN0RGF0YSgKICAgICAgICAgICAgcmVwbGFjZW1lbnRfc3RyYXRlZ3k9dW50cmFpbmVkX2xldmVsc190cmVhdG1lbnRfbWV0aG9kLAogICAgICAgICkKICAgIGVsc2U6CiAgICAgICAgbmV3X2xldmVscyA9IE5ld19jYXRlZ29yaWNhbF9MZXZlbHNfaW5fVGVzdERhdGEoCiAgICAgICAgICAgIHJlcGxhY2VtZW50X3N0cmF0ZWd5PSJyYWlzZSBleGNlcHRpb24iLAogICAgICAgICkKCiAgICAjIG5vbiBsaW5lYXIgZmVhdHVyZXMKICAgIGlmIG5vbl9saW5lYXJfZmVhdHVyZXM6CiAgICAgICAgbm9uX2xpbmVhciA9IE1ha2VfTm9uTGluZWFyX0ZlYXR1cmVzKAogICAgICAgICAgICBQb2x5bm9taWFsX2RlZ3JlZT0yLAogICAgICAgICAgICBvdGhlcl9ub25saW5lcl9mZWF0dXJlcz1bInNpbiIsICJjb3MiLCAidGFuIl0sCiAgICAgICAgICAgIHRvcF9mZWF0dXJlc190b19waWNrPTAuMjAsCiAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUsCiAgICAgICAgICAgIHN1YmNsYXNzPSJpZ25vcmUiLAogICAgICAgICAgICBuX2pvYnM9MSwKICAgICAgICApCiAgICBlbHNlOgogICAgICAgIG5vbl9saW5lYXIgPSAicGFzc3Rocm91Z2giCgogICAgIyBiaW5uaW5nCiAgICBpZiBhcHBseV9iaW5uaW5nID09IFRydWU6CiAgICAgICAgYmlubiA9IEJpbm5pbmcoZmVhdHVyZXNfdG9fZGlzY3JldGl6ZT1mZWF0dXJlc190b19iaW5uKQogICAgZWxzZToKICAgICAgICBiaW5uID0gInBhc3N0aHJvdWdoIgoKICAgICMgT3V0bGllciByZW1vdmFsCiAgICBpZiByZW1vdmVfb3V0bGllcnM6CiAgICAgICAgb3V0bGllcnMgPSBPdXRsaWVyKCkKICAgIGVsc2U6CiAgICAgICAgb3V0bGllcnMgPSAicGFzc3Rocm91Z2giCgogICAgIyBmZWF0dXJlX2dlbmVyYXRpb24KICAgIGlmIGZlYXR1cmVfZ2VuZXJhdG9yOgogICAgICAgIGZlYXR1cmVfZ2VuID0gRmVhdHVyZUdlbmVyYXRvcihwYWlyd2lzZV9saW5lYXI9VHJ1ZSkKICAgIGVsc2U6CiAgICAgICAgZmVhdHVyZV9nZW4gPSAicGFzc3Rocm91Z2giCgogICAgaWYgY2x1c3Rlcl9lbnRpcmVfZGF0YSA9PSBUcnVlOgogICAgICAgIGNsdXN0ZXJfYWxsID0gQ2x1c3Rlcl9FbnRpcmVfRGF0YSgKICAgICAgICAgICAgY2hlY2tfY2x1c3RlcnNfdXB0bz1yYW5nZV9vZl9jbHVzdGVyc190b190cnksCiAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUsCiAgICAgICAgKQogICAgZWxzZToKICAgICAgICBjbHVzdGVyX2FsbCA9ICJwYXNzdGhyb3VnaCIKCiAgICAjIGZlYXR1cmUgc2VsZWN0aW9uCiAgICBpZiBmZWF0dXJlX3NlbGVjdG9yOgogICAgICAgIHNlbGVjdG9yID0gRmVhdHVyZVNlbGVjdG9yKHJhbmRvbV9zdGF0ZT00KQogICAgZWxzZToKICAgICAgICBzZWxlY3RvciA9ICJwYXNzdGhyb3VnaCIKCiAgICBwaXBlID0gUGlwZWxpbmUoCiAgICAgICAgWwogICAgICAgICAgICAoIkltcHV0ZXJfT25lSG90RW5jb2RlciIsIEltcHV0ZVByb2Nlc3NvcihjYXJkaW5hbGl0eT0yMCwgbGFiZWxfZW5jPWxhYmVsX2VuYykpLAogICAgICAgICAgICAoIkl0ZXJhdGl2ZV9JbXB1dGVyIiwgaW1wdXRlciksICAjIE5lZWRzIHRvIGJlIGluY2x1ZGVkIGluIEltcHV0ZVByb2Nlc3NvcgogICAgICAgICAgICAoIm5ld19sZXZlbHMxIiwgbmV3X2xldmVsczEpLAogICAgICAgICAgICAjICAgICAgICAgICAgICAgICAgICAgICgiY2FyZGluYWxpdHkiLCBjYXJkaW5hbGl0eSksCiAgICAgICAgICAgICgiWmVyb19OZWFyWmVyb19WYXJpYW5jZSIsIHplcm8pLAogICAgICAgICAgICAoImNsdWJfUl9MIiwgY2x1Yl9SX0wpLAogICAgICAgICAgICAoIm5ld19sZXZlbHMiLCBuZXdfbGV2ZWxzKSwKICAgICAgICAgICAgKCJub25fbGluZWFyIiwgbm9uX2xpbmVhciksCiAgICAgICAgICAgICgiYmlubiIsIGJpbm4pLAogICAgICAgICAgICAoImZlYXR1cmVfZ2VuZXJhdG9yIiwgZmVhdHVyZV9nZW4pLAogICAgICAgICAgICAoIkZlYXR1cmVfc2VsZWN0b3IiLCBzZWxlY3RvciksCiAgICAgICAgICAgICgiT3V0bGllcl9SZW1vdmFsIiwgb3V0bGllcnMpLAogICAgICAgICAgICAjICAgICAgICAgICAgICAgICAgKCdSRicsIFJhbmRvbUZvcmVzdFJlZ3Jlc3NvcigpKQogICAgICAgIF0KICAgICkKICAgIHJldHVybiBwaXBlCgoKY2xhc3MgTXlSZWdyZXNzb3IoQmFzZUVzdGltYXRvciwgUmVncmVzc29yTWl4aW4pOgogICAgZnJvbSB4Z2Jvb3N0IGltcG9ydCBYR0JSZWdyZXNzb3IKICAgIGRlZiBfX2luaXRfXygKICAgICAgICAgICAgc2VsZiwKICAgICAgICAgICAgZXN0aW1hdG9yPVhHQlJlZ3Jlc3NvcigpLAogICAgKToKICAgICAgICAiIiIKICAgICAgICBBIEN1c3RvbSBCYXNlRXN0aW1hdG9yIHRoYXQgY2FuIHN3aXRjaCBiZXR3ZWVuIFJlZ3Jlc3Nvci4KICAgICAgICA6cGFyYW0gZXN0aW1hdG9yOiBza2xlYXJuIG9iamVjdCAtIFRoZSBSZWdyZXNzb3IKICAgICAgICAiIiIKCiAgICAgICAgc2VsZi5lc3RpbWF0b3IgPSBlc3RpbWF0b3IKCiAgICBkZWYgZml0KHNlbGYsIFgsIHk9Tm9uZSwgKiprd2FyZ3MpOgogICAgICAgIHNlbGYuZXN0aW1hdG9yLmZpdChYLCB5KQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIHByZWRpY3Qoc2VsZiwgWCwgeT1Ob25lKToKICAgICAgICByZXR1cm4gc2VsZi5lc3RpbWF0b3IucHJlZGljdChYKQoKICAgIGRlZiBwcmVkaWN0X3Byb2JhKHNlbGYsIFgpOgogICAgICAgIHJldHVybiBzZWxmLmVzdGltYXRvci5wcmVkaWN0X3Byb2JhKFgpCgogICAgZGVmIHNjb3JlKHNlbGYsIFgsIHkpOgogICAgICAgIHJldHVybiBzZWxmLmVzdGltYXRvci5zY29yZShYLCB5KQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIGNsYXNzZXNfKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLmVzdGltYXRvci5jbGFzc2VzXwoK\",\"8683582\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uCiMgY29kaW5nOiB1dGYtOAoKIyAjIE1vZGVsIGZpdHRpbmcgJiB0cmFpbmluZwoKIyBJblsgXToKCgojc2tsZWFybiB0cmFpbiBtb2RlbAppbXBvcnQgcGFuZGFzCmZyb20gc2tsZWFybiBpbXBvcnQgbW9kZWxfc2VsZWN0aW9uCmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExvZ2lzdGljUmVncmVzc2lvbgpmcm9tIHNrbGVhcm4ubmFpdmVfYmF5ZXMgaW1wb3J0IEdhdXNzaWFuTkIKZnJvbSBza2xlYXJuLm5haXZlX2JheWVzIGltcG9ydCBNdWx0aW5vbWlhbE5CCmltcG9ydCBwaWNrbGUKdXJsID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYnJvd25sZWUvRGF0YXNldHMvbWFzdGVyL3BpbWEtaW5kaWFucy1kaWFiZXRlcy5kYXRhLmNzdiIKbmFtZXMgPSBbJ3ByZWcnLCAncGxhcycsICdwcmVzJywgJ3NraW4nLCAndGVzdCcsICdtYXNzJywgJ3BlZGknLCAnYWdlJywgJ2NsYXNzJ10KZGF0YWZyYW1lID0gcGFuZGFzLnJlYWRfY3N2KHVybCwgbmFtZXM9bmFtZXMpCmFycmF5ID0gZGF0YWZyYW1lLnZhbHVlcwpYID0gYXJyYXlbOiwwOjhdClkgPSBhcnJheVs6LDhdCnRlc3Rfc2l6ZSA9IDAuMzMKc2VlZCA9IDcKWF90cmFpbiwgWF90ZXN0LCBZX3RyYWluLCBZX3Rlc3QgPSBtb2RlbF9zZWxlY3Rpb24udHJhaW5fdGVzdF9zcGxpdChYLCBZLCB0ZXN0X3NpemU9dGVzdF9zaXplLCByYW5kb21fc3RhdGU9c2VlZCkKbW9kZWwgPSBNdWx0aW5vbWlhbE5CKCkKbW9kZWwuZml0KFhfdHJhaW4sIFlfdHJhaW4pOwoKIyAjIE1vZGVsIFNhdmUKCiMgSW5bIF06CgoKZnJvbSBOb3RlYm9vay5EU05vdGVib29rLk5vdGVib29rRXhlY3V0b3IgaW1wb3J0IE5vdGVib29rRXhlY3V0b3IKbmIgPSBOb3RlYm9va0V4ZWN1dG9yKCkKc2F2ZWRfbW9kZWwgPSBuYi5zYXZlX21vZGVsKG1vZGVsID0gbW9kZWwsIG1vZGVsTmFtZSA9ICdNb2RlbF9uZXdUZW5hbnRfVjInLCBtb2RlbFR5cGUgPSAnbWwnLCBYID0gWF90cmFpbiwgeSA9IFlfdHJhaW4sIGVzdGltYXRvcl90eXBlPSdjbGFzc2lmaWNhdGlvbicpCiNYIGFuZCB5IGFyZSB0cmFpbmluZyBkYXRhc2V0cyB0byBnZXQgZXhwbGFpbmVyIGRhc2hib2FyZC4KI2VzdGltYXRvcl90eXBlIGlzIHRvIHNwZWNpZnkgYWxnb3JpdGhtIHR5cGUgaS5lLiwgY2xhc3NpZmljYXRpb24gYW5kIHJlZ3Jlc3Npb24uCiNPbmx5ICdtbOKAmSBtb2RlbHMgd2l0aCB0YWJ1bGFyIGRhdGEgYXMgaW5wdXQgd2lsbCBzdXBwb3J0IGluIEV4cGxhaW5lciBEYXNoYm9hcmQuCiNDaG9vc2UgbW9kZWxUeXBlID0gJ21sJyBmb3IgbWFjaGluZSBsZWFybmluZyBtb2RlbHMsIG1vZGVsVHlwZSA9ICdjdicgZm9yIGNvbXB1dGVyIHZpc2lvbiBtb2RlbHMgYW5kIG1vZGVsVHlwZSA9ICdkcCcgZm9yIGRhdGEgdHJhbnNmb3JtYXRpb24gcGlja2xlIGZpbGVzLiAKI1Byb3ZpZGUg4oCYY29sdW1uX2hlYWRlcnPigJkgYXMgYSBwYXJhbWV0ZXIgaWYgdGhleSBoYXZlIHRvIGJlIHNhdmVkIGluIHRoZSBtb2RlbC4KI0lmIHVzaW5nIGN1c3RvbSBsYXllciBpbiBrZXJhcywgdXNlIG5hdGl2ZSBzYXZlIGZ1bmN0aW9uYWxpdHkgZnJvbSBrZXJhcy4KCiMgIyBNb2RlbCBMb2FkCgojIEluWyBdOgoKCmZyb20gTm90ZWJvb2suRFNOb3RlYm9vay5Ob3RlYm9va0V4ZWN1dG9yIGltcG9ydCBOb3RlYm9va0V4ZWN1dG9yCm5iID0gTm90ZWJvb2tFeGVjdXRvcigpCmxvYWRlZF9tb2RlbCA9IG5iLmxvYWRfc2F2ZWRfbW9kZWwoJzE3MTcxNjkyNzczNDY5NTExJykKCiMgSW5bIF06CgoKWF90ZXN0X2NvcHkgPSBYX3Rlc3QuY29weSgpCgojICMgTW9kZWwgUHJlZGljdAoKIyBJblsgXToKCgpuYi5wcmVkaWN0KG1vZGVsID0gbG9hZGVkX21vZGVsLCBkYXRhZnJhbWUgPSBYX3Rlc3RfY29weSwgbW9kZWx0eXBlPSdtbCcpIAogI0Nob29zZSBtb2RlbHR5cGUgJ21sJyBmb3IgbWFjaGluZSBsZWFybmluZyBtb2RlbHMgYW5kICdjdicgZm9yIGNvbXB1dGVyIHZpc2lvbiBtb2RlbCAKICNleDogRm9yIG1hY2hpbmUgbGVhcm5pbmcgbW9kZWwgbmIucHJlZGljdChtb2RlbCA9IG1vZGVsLCBtb2RlbHR5cGUgPSAnbWwnLCBkYXRhZnJhbWUgPSBkZikgCiAjZXg6IEZvciBjb21wdXRlciB2aXNpb24ga2VyYXMgbW9kZWwgbmIucHJlZGljdChtb2RlbCA9IG1vZGVsLCBtb2RlbHR5cGUgPSAnY3YnLCBpbWdzID0gaW1ncywgaW1nc2l6ZSA9ICgyOCwgMjgpLCBkaW0gPSAxLCBjbGFzc19uYW1lcyA9IGNsYXNzX25hbWVzKSAKICNhbmQgZm9yIHB5dG9yY2ggbW9kZWwobW9kZWwgPSBtb2RlbCwgbW9kZWx0eXBlID0gJ2N2JywgaW1ncyA9IGltZ3MsIGNsYXNzX25hbWVzID0gY2xhc3NfbmFtZXMpIAogI05vdGU6IGluY2FzZSBhbnkgZXJyb3IgaW4gcHJlZGljdGlvbiB1c2VyIHNxdWVlemVkIGltYWdlIGRhdGEgaW4ga2VyYXMKCiMgSW5bIF06CgoKWF90ZXN0X2NvcHkgPSBYX3Rlc3QuY29weSgpCgojIEluWyBdOgoKCllfcHJlZCA9IG5iLnByZWRpY3QobW9kZWwgPSBsb2FkZWRfbW9kZWwsIGRhdGFmcmFtZSA9IFhfdGVzdF9jb3B5LCBtb2RlbHR5cGU9J21sJykgCgojIEluWyBdOgoKCllfcHJlZC5oZWFkKCkKCiMgSW5bIF06CgoKZnJvbSBza2xlYXJuLm1ldHJpY3MgaW1wb3J0IGFjY3VyYWN5X3Njb3JlCmFjY3VyYWN5X3Njb3JlKFlfdGVzdCwgWV9wcmVkLnByZWRpY3Rpb25zKQoKIyAjIFNhbmRib3ggZmlsZSByZWFkCgojIEluWyBdOgoKCmZyb20gTm90ZWJvb2suRFNOb3RlYm9vay5Ob3RlYm9va0V4ZWN1dG9yIGltcG9ydCBOb3RlYm9va0V4ZWN1dG9yCm5iID0gTm90ZWJvb2tFeGVjdXRvcigpCmRmX1Rlc3RfRGF0YSA9IG5iLmdldF9kYXRhKCcxNzE3MTY5MjY4MTk0MjM0OScsICdAU1lTLlVTRVJJRCcsICdUcnVlJywge30sIFtdKQpkZl9UZXN0X0RhdGEKCiMgIyBBcnRpZmFjdHMgZmlsZSBzYXZlCgojIEluWyBdOgoKCmZyb20gTm90ZWJvb2suRFNOb3RlYm9vay5Ob3RlYm9va0V4ZWN1dG9yIGltcG9ydCBOb3RlYm9va0V4ZWN1dG9yCm5iID0gTm90ZWJvb2tFeGVjdXRvcigpCiNGaWxlIGV4dGVuc2lvbiBzaG91bGQgYmUgd2l0aCAuY3N2Ly5qc29uLy50eHQKbmIuc2F2ZV9hcnRpZmFjdChkYXRhZnJhbWUgPSBkZl9UZXN0X0RhdGEsIG5hbWUgPSAnZGZfVGVzdF9EYXRhLnR4dCcpCgojICMgQXJ0aWZhY3RzIHNhdmVkIGZpbGUgcmVhZAoKIyBJblsgXToKCgpAU1lTLkFSVElGQUNUX1BBVEgrJ2RmX1Rlc3RfRGF0YS50eHQnCgojIEluWyBdOgoKCnByaW50KG9wZW4oQFNZUy5BUlRJRkFDVF9QQVRIKydkZl9UZXN0X0RhdGEudHh0JykucmVhZCgpKQoKIyAjIFJlYWRpbmcgdXBsb2FkZWQgZmlsZSBpbiBmb3JkZXIgc3RydWN0dXJlCgojIEluWyBdOgoKCkBTWVMuREFUQVNBTkRCT1hfUEFUSCArICcxMjMxNDIxNDQxL0RhdGEvRm9sZGVyX1YxL2NodXJuX2RhdGFfbmV3LmNzdicKCiMgSW5bIF06CgoKcGQucmVhZF9jc3YoQFNZUy5EQVRBU0FOREJPWF9QQVRIICsgJzEyMzE0MjE0NDEvRGF0YS9Gb2xkZXJfVjEvY2h1cm5fZGF0YV9uZXcuY3N2JykKCiMgIyBVdGlsaXR5IGZpbGUgcmVhZAoKIyBJblsgXToKCgpmcm9tIFV0aWl0eV9zY3JpcHRfVjE1IGltcG9ydCBQZXJzb24KRnV0dXJlID0gUGVyc29uKCJTaHlhbSIsICIyOSIpCnByaW50KEZ1dHVyZS5uYW1lKQpwcmludChGdXR1cmUuYWdlKQoKIyAjIERhdGEgVHJhbnNmb3JtYXRpb24gc2F2ZQoKIyBJblsgXToKCgpmcm9tIHNrbGVhcm4uZGF0YXNldHMgaW1wb3J0IG1ha2VfYmxvYnMKZnJvbSBza2xlYXJuLm1vZGVsX3NlbGVjdGlvbiBpbXBvcnQgdHJhaW5fdGVzdF9zcGxpdApmcm9tIHNrbGVhcm4ucHJlcHJvY2Vzc2luZyBpbXBvcnQgTWluTWF4U2NhbGVyCmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExvZ2lzdGljUmVncmVzc2lvbgpmcm9tIHBpY2tsZSBpbXBvcnQgZHVtcAojIHByZXBhcmUgZGF0YXNldApYLCB5ID0gbWFrZV9ibG9icyhuX3NhbXBsZXM9MTAwLCBjZW50ZXJzPTIsIG5fZmVhdHVyZXM9MiwgcmFuZG9tX3N0YXRlPTEpCiMgc3BsaXQgZGF0YSBpbnRvIHRyYWluIGFuZCB0ZXN0IHNldHMKWF90cmFpbiwgXywgeV90cmFpbiwgXyA9IHRyYWluX3Rlc3Rfc3BsaXQoWCwgeSwgdGVzdF9zaXplPTAuMzMsIHJhbmRvbV9zdGF0ZT0xKQojIGRlZmluZSBzY2FsZXIKc2NhbGVyID0gTWluTWF4U2NhbGVyKCkKIyBmaXQgc2NhbGVyIG9uIHRoZSB0cmFpbmluZyBkYXRhc2V0CnNjYWxlci5maXQoWF90cmFpbik7CiMgdHJhbnNmb3JtIHRoZSB0cmFpbmluZyBkYXRhc2V0ClhfdHJhaW5fc2NhbGVkID0gc2NhbGVyLnRyYW5zZm9ybShYX3RyYWluKQpmcm9tIE5vdGVib29rLkRTTm90ZWJvb2suTm90ZWJvb2tFeGVjdXRvciBpbXBvcnQgTm90ZWJvb2tFeGVjdXRvcgpuYiA9IE5vdGVib29rRXhlY3V0b3IoKQpzYXZlZF9tb2RlbCA9IG5iLnNhdmVfbW9kZWwobW9kZWwgPSBzY2FsZXIsIG1vZGVsTmFtZSA9ICdTY2FsZXJUcmFuc2Zvcm0nLCBtb2RlbFR5cGUgPSAnZHAnLCBYID0gTm9uZSwgeSA9IE5vbmUsIGVzdGltYXRvcl90eXBlPScnKQojWCBhbmQgeSBhcmUgdHJhaW5pbmcgZGF0YXNldHMgdG8gZ2V0IGV4cGxhaW5lciBkYXNoYm9hcmQuCiNlc3RpbWF0b3JfdHlwZSBpcyB0byBzcGVjaWZ5IGFsZ29yaXRobSB0eXBlIGkuZS4sIGNsYXNzaWZpY2F0aW9uIGFuZCByZWdyZXNzaW9uLgojT25seSAnbWzigJkgbW9kZWxzIHdpdGggdGFidWxhciBkYXRhIGFzIGlucHV0IHdpbGwgc3VwcG9ydCBpbiBFeHBsYWluZXIgRGFzaGJvYXJkLgojQ2hvb3NlIG1vZGVsVHlwZSA9ICdtbCcgZm9yIG1hY2hpbmUgbGVhcm5pbmcgbW9kZWxzLCBtb2RlbFR5cGUgPSAnY3YnIGZvciBjb21wdXRlciB2aXNpb24gbW9kZWxzIGFuZCBtb2RlbFR5cGUgPSAnZHAnIGZvciBkYXRhIHRyYW5zZm9ybWF0aW9uIHBpY2tsZSBmaWxlcy4gCiNQcm92aWRlIOKAmGNvbHVtbl9oZWFkZXJz4oCZIGFzIGEgcGFyYW1ldGVyIGlmIHRoZXkgaGF2ZSB0byBiZSBzYXZlZCBpbiB0aGUgbW9kZWwuCiNJZiB1c2luZyBjdXN0b20gbGF5ZXIgaW4ga2VyYXMsIHVzZSBuYXRpdmUgc2F2ZSBmdW5jdGlvbmFsaXR5IGZyb20ga2VyYXMuCgojICMgVHJhbnNmb3JtYXRpb24gbG9hZAoKIyBJblsgXToKCgpmcm9tIE5vdGVib29rLkRTTm90ZWJvb2suTm90ZWJvb2tFeGVjdXRvciBpbXBvcnQgTm90ZWJvb2tFeGVjdXRvcgpuYiA9IE5vdGVib29rRXhlY3V0b3IoKQpsb2FkZWRfbW9kZWwgPSBuYi5sb2FkX21vZGVsKCcxNzE3MTY5Mjc3Mzc3MTAxMicpCgojICMgVHJhbnNmb3JtaW5nIHRyYWluZyBkYXRhCgojIEluWyBdOgoKCmxvYWRlZF9tb2RlbC50cmFuc2Zvcm0oWF90cmFpbikK\",\"8683581\":\"Y2xhc3MgUGVyc29uX1YzOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIGFnZSk6CgkgICAgc2VsZi5uYW1lID0gbmFtZQoJICAgIHNlbGYuYWdlID0gYWdlCgkgICAgcHJpbnQoIjEiKQoKICAgIGRlZiBteWZ1bmMoc2VsZik6CiAgICAJcHJpbnQoIkhlbGxvIG15IG5hbWUgaXMgIiArIHNlbGYubmFtZSk=\",\"8683580\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uCiMgY29kaW5nOiB1dGYtOAoKIyAjIE1vZGVsIGZpdHRpbmcgJiB0cmFpbmluZwoKIyBJblsgXToKCgojc2tsZWFybiB0cmFpbiBtb2RlbAppbXBvcnQgcGFuZGFzCmZyb20gc2tsZWFybiBpbXBvcnQgbW9kZWxfc2VsZWN0aW9uCmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExvZ2lzdGljUmVncmVzc2lvbgpmcm9tIHNrbGVhcm4ubmFpdmVfYmF5ZXMgaW1wb3J0IEdhdXNzaWFuTkIKZnJvbSBza2xlYXJuLm5haXZlX2JheWVzIGltcG9ydCBNdWx0aW5vbWlhbE5CCmltcG9ydCBwaWNrbGUKdXJsID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYnJvd25sZWUvRGF0YXNldHMvbWFzdGVyL3BpbWEtaW5kaWFucy1kaWFiZXRlcy5kYXRhLmNzdiIKbmFtZXMgPSBbJ3ByZWcnLCAncGxhcycsICdwcmVzJywgJ3NraW4nLCAndGVzdCcsICdtYXNzJywgJ3BlZGknLCAnYWdlJywgJ2NsYXNzJ10KZGF0YWZyYW1lID0gcGFuZGFzLnJlYWRfY3N2KHVybCwgbmFtZXM9bmFtZXMpCmFycmF5ID0gZGF0YWZyYW1lLnZhbHVlcwpYID0gYXJyYXlbOiwwOjhdClkgPSBhcnJheVs6LDhdCnRlc3Rfc2l6ZSA9IDAuMzMKc2VlZCA9IDcKWF90cmFpbiwgWF90ZXN0LCBZX3RyYWluLCBZX3Rlc3QgPSBtb2RlbF9zZWxlY3Rpb24udHJhaW5fdGVzdF9zcGxpdChYLCBZLCB0ZXN0X3NpemU9dGVzdF9zaXplLCByYW5kb21fc3RhdGU9c2VlZCkKbW9kZWwgPSBNdWx0aW5vbWlhbE5CKCkKbW9kZWwuZml0KFhfdHJhaW4sIFlfdHJhaW4pOwoKIyAjIE1vZGVsIFNhdmUKCiMgSW5bIF06CgoKZnJvbSBOb3RlYm9vay5EU05vdGVib29rLk5vdGVib29rRXhlY3V0b3IgaW1wb3J0IE5vdGVib29rRXhlY3V0b3IKbmIgPSBOb3RlYm9va0V4ZWN1dG9yKCkKc2F2ZWRfbW9kZWwgPSBuYi5zYXZlX21vZGVsKG1vZGVsID0gbW9kZWwsIG1vZGVsTmFtZSA9ICdNb2RlbF9uZXdUZW5hbnRfVjInLCBtb2RlbFR5cGUgPSAnbWwnLCBYID0gWF90cmFpbiwgeSA9IFlfdHJhaW4sIGVzdGltYXRvcl90eXBlPSdjbGFzc2lmaWNhdGlvbicpCiNYIGFuZCB5IGFyZSB0cmFpbmluZyBkYXRhc2V0cyB0byBnZXQgZXhwbGFpbmVyIGRhc2hib2FyZC4KI2VzdGltYXRvcl90eXBlIGlzIHRvIHNwZWNpZnkgYWxnb3JpdGhtIHR5cGUgaS5lLiwgY2xhc3NpZmljYXRpb24gYW5kIHJlZ3Jlc3Npb24uCiNPbmx5ICdtbOKAmSBtb2RlbHMgd2l0aCB0YWJ1bGFyIGRhdGEgYXMgaW5wdXQgd2lsbCBzdXBwb3J0IGluIEV4cGxhaW5lciBEYXNoYm9hcmQuCiNDaG9vc2UgbW9kZWxUeXBlID0gJ21sJyBmb3IgbWFjaGluZSBsZWFybmluZyBtb2RlbHMsIG1vZGVsVHlwZSA9ICdjdicgZm9yIGNvbXB1dGVyIHZpc2lvbiBtb2RlbHMgYW5kIG1vZGVsVHlwZSA9ICdkcCcgZm9yIGRhdGEgdHJhbnNmb3JtYXRpb24gcGlja2xlIGZpbGVzLiAKI1Byb3ZpZGUg4oCYY29sdW1uX2hlYWRlcnPigJkgYXMgYSBwYXJhbWV0ZXIgaWYgdGhleSBoYXZlIHRvIGJlIHNhdmVkIGluIHRoZSBtb2RlbC4KI0lmIHVzaW5nIGN1c3RvbSBsYXllciBpbiBrZXJhcywgdXNlIG5hdGl2ZSBzYXZlIGZ1bmN0aW9uYWxpdHkgZnJvbSBrZXJhcy4KCiMgIyBNb2RlbCBMb2FkCgojIEluWyBdOgoKCmZyb20gTm90ZWJvb2suRFNOb3RlYm9vay5Ob3RlYm9va0V4ZWN1dG9yIGltcG9ydCBOb3RlYm9va0V4ZWN1dG9yCm5iID0gTm90ZWJvb2tFeGVjdXRvcigpCmxvYWRlZF9tb2RlbCA9IG5iLmxvYWRfc2F2ZWRfbW9kZWwoJzE3MTcxNjkyNzczNDY5NTExJykKCiMgSW5bIF06CgoKWF90ZXN0X2NvcHkgPSBYX3Rlc3QuY29weSgpCgojICMgTW9kZWwgUHJlZGljdAoKIyBJblsgXToKCgpuYi5wcmVkaWN0KG1vZGVsID0gbG9hZGVkX21vZGVsLCBkYXRhZnJhbWUgPSBYX3Rlc3RfY29weSwgbW9kZWx0eXBlPSdtbCcpIAogI0Nob29zZSBtb2RlbHR5cGUgJ21sJyBmb3IgbWFjaGluZSBsZWFybmluZyBtb2RlbHMgYW5kICdjdicgZm9yIGNvbXB1dGVyIHZpc2lvbiBtb2RlbCAKICNleDogRm9yIG1hY2hpbmUgbGVhcm5pbmcgbW9kZWwgbmIucHJlZGljdChtb2RlbCA9IG1vZGVsLCBtb2RlbHR5cGUgPSAnbWwnLCBkYXRhZnJhbWUgPSBkZikgCiAjZXg6IEZvciBjb21wdXRlciB2aXNpb24ga2VyYXMgbW9kZWwgbmIucHJlZGljdChtb2RlbCA9IG1vZGVsLCBtb2RlbHR5cGUgPSAnY3YnLCBpbWdzID0gaW1ncywgaW1nc2l6ZSA9ICgyOCwgMjgpLCBkaW0gPSAxLCBjbGFzc19uYW1lcyA9IGNsYXNzX25hbWVzKSAKICNhbmQgZm9yIHB5dG9yY2ggbW9kZWwobW9kZWwgPSBtb2RlbCwgbW9kZWx0eXBlID0gJ2N2JywgaW1ncyA9IGltZ3MsIGNsYXNzX25hbWVzID0gY2xhc3NfbmFtZXMpIAogI05vdGU6IGluY2FzZSBhbnkgZXJyb3IgaW4gcHJlZGljdGlvbiB1c2VyIHNxdWVlemVkIGltYWdlIGRhdGEgaW4ga2VyYXMKCiMgSW5bIF06CgoKWF90ZXN0X2NvcHkgPSBYX3Rlc3QuY29weSgpCgojIEluWyBdOgoKCllfcHJlZCA9IG5iLnByZWRpY3QobW9kZWwgPSBsb2FkZWRfbW9kZWwsIGRhdGFmcmFtZSA9IFhfdGVzdF9jb3B5LCBtb2RlbHR5cGU9J21sJykgCgojIEluWyBdOgoKCllfcHJlZC5oZWFkKCkKCiMgSW5bIF06CgoKZnJvbSBza2xlYXJuLm1ldHJpY3MgaW1wb3J0IGFjY3VyYWN5X3Njb3JlCmFjY3VyYWN5X3Njb3JlKFlfdGVzdCwgWV9wcmVkLnByZWRpY3Rpb25zKQoKIyAjIFNhbmRib3ggZmlsZSByZWFkCgojIEluWyBdOgoKCmZyb20gTm90ZWJvb2suRFNOb3RlYm9vay5Ob3RlYm9va0V4ZWN1dG9yIGltcG9ydCBOb3RlYm9va0V4ZWN1dG9yCm5iID0gTm90ZWJvb2tFeGVjdXRvcigpCmRmX1Rlc3RfRGF0YSA9IG5iLmdldF9kYXRhKCcxNzE3MTY5MjY4MTk0MjM0OScsICdAU1lTLlVTRVJJRCcsICdUcnVlJywge30sIFtdKQpkZl9UZXN0X0RhdGEKCiMgIyBBcnRpZmFjdHMgZmlsZSBzYXZlCgojIEluWyBdOgoKCmZyb20gTm90ZWJvb2suRFNOb3RlYm9vay5Ob3RlYm9va0V4ZWN1dG9yIGltcG9ydCBOb3RlYm9va0V4ZWN1dG9yCm5iID0gTm90ZWJvb2tFeGVjdXRvcigpCiNGaWxlIGV4dGVuc2lvbiBzaG91bGQgYmUgd2l0aCAuY3N2Ly5qc29uLy50eHQKbmIuc2F2ZV9hcnRpZmFjdChkYXRhZnJhbWUgPSBkZl9UZXN0X0RhdGEsIG5hbWUgPSAnZGZfVGVzdF9EYXRhLnR4dCcpCgojICMgQXJ0aWZhY3RzIHNhdmVkIGZpbGUgcmVhZAoKIyBJblsgXToKCgpAU1lTLkFSVElGQUNUX1BBVEgrJ2RmX1Rlc3RfRGF0YS50eHQnCgojIEluWyBdOgoKCnByaW50KG9wZW4oQFNZUy5BUlRJRkFDVF9QQVRIKydkZl9UZXN0X0RhdGEudHh0JykucmVhZCgpKQoKIyAjIFJlYWRpbmcgdXBsb2FkZWQgZmlsZSBpbiBmb3JkZXIgc3RydWN0dXJlCgojIEluWyBdOgoKCkBTWVMuREFUQVNBTkRCT1hfUEFUSCArICcxMjMxNDIxNDQxL0RhdGEvRm9sZGVyX1YxL2NodXJuX2RhdGFfbmV3LmNzdicKCiMgSW5bIF06CgoKcGQucmVhZF9jc3YoQFNZUy5EQVRBU0FOREJPWF9QQVRIICsgJzEyMzE0MjE0NDEvRGF0YS9Gb2xkZXJfVjEvY2h1cm5fZGF0YV9uZXcuY3N2JykKCiMgIyBVdGlsaXR5IGZpbGUgcmVhZAoKIyBJblsgXToKCgpmcm9tIFV0aWl0eV9zY3JpcHRfVjE1IGltcG9ydCBQZXJzb24KRnV0dXJlID0gUGVyc29uKCJTaHlhbSIsICIyOSIpCnByaW50KEZ1dHVyZS5uYW1lKQpwcmludChGdXR1cmUuYWdlKQoKIyAjIERhdGEgVHJhbnNmb3JtYXRpb24gc2F2ZQoKIyBJblsgXToKCgpmcm9tIHNrbGVhcm4uZGF0YXNldHMgaW1wb3J0IG1ha2VfYmxvYnMKZnJvbSBza2xlYXJuLm1vZGVsX3NlbGVjdGlvbiBpbXBvcnQgdHJhaW5fdGVzdF9zcGxpdApmcm9tIHNrbGVhcm4ucHJlcHJvY2Vzc2luZyBpbXBvcnQgTWluTWF4U2NhbGVyCmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExvZ2lzdGljUmVncmVzc2lvbgpmcm9tIHBpY2tsZSBpbXBvcnQgZHVtcAojIHByZXBhcmUgZGF0YXNldApYLCB5ID0gbWFrZV9ibG9icyhuX3NhbXBsZXM9MTAwLCBjZW50ZXJzPTIsIG5fZmVhdHVyZXM9MiwgcmFuZG9tX3N0YXRlPTEpCiMgc3BsaXQgZGF0YSBpbnRvIHRyYWluIGFuZCB0ZXN0IHNldHMKWF90cmFpbiwgXywgeV90cmFpbiwgXyA9IHRyYWluX3Rlc3Rfc3BsaXQoWCwgeSwgdGVzdF9zaXplPTAuMzMsIHJhbmRvbV9zdGF0ZT0xKQojIGRlZmluZSBzY2FsZXIKc2NhbGVyID0gTWluTWF4U2NhbGVyKCkKIyBmaXQgc2NhbGVyIG9uIHRoZSB0cmFpbmluZyBkYXRhc2V0CnNjYWxlci5maXQoWF90cmFpbik7CiMgdHJhbnNmb3JtIHRoZSB0cmFpbmluZyBkYXRhc2V0ClhfdHJhaW5fc2NhbGVkID0gc2NhbGVyLnRyYW5zZm9ybShYX3RyYWluKQpmcm9tIE5vdGVib29rLkRTTm90ZWJvb2suTm90ZWJvb2tFeGVjdXRvciBpbXBvcnQgTm90ZWJvb2tFeGVjdXRvcgpuYiA9IE5vdGVib29rRXhlY3V0b3IoKQpzYXZlZF9tb2RlbCA9IG5iLnNhdmVfbW9kZWwobW9kZWwgPSBzY2FsZXIsIG1vZGVsTmFtZSA9ICdTY2FsZXJUcmFuc2Zvcm0nLCBtb2RlbFR5cGUgPSAnZHAnLCBYID0gTm9uZSwgeSA9IE5vbmUsIGVzdGltYXRvcl90eXBlPScnKQojWCBhbmQgeSBhcmUgdHJhaW5pbmcgZGF0YXNldHMgdG8gZ2V0IGV4cGxhaW5lciBkYXNoYm9hcmQuCiNlc3RpbWF0b3JfdHlwZSBpcyB0byBzcGVjaWZ5IGFsZ29yaXRobSB0eXBlIGkuZS4sIGNsYXNzaWZpY2F0aW9uIGFuZCByZWdyZXNzaW9uLgojT25seSAnbWzigJkgbW9kZWxzIHdpdGggdGFidWxhciBkYXRhIGFzIGlucHV0IHdpbGwgc3VwcG9ydCBpbiBFeHBsYWluZXIgRGFzaGJvYXJkLgojQ2hvb3NlIG1vZGVsVHlwZSA9ICdtbCcgZm9yIG1hY2hpbmUgbGVhcm5pbmcgbW9kZWxzLCBtb2RlbFR5cGUgPSAnY3YnIGZvciBjb21wdXRlciB2aXNpb24gbW9kZWxzIGFuZCBtb2RlbFR5cGUgPSAnZHAnIGZvciBkYXRhIHRyYW5zZm9ybWF0aW9uIHBpY2tsZSBmaWxlcy4gCiNQcm92aWRlIOKAmGNvbHVtbl9oZWFkZXJz4oCZIGFzIGEgcGFyYW1ldGVyIGlmIHRoZXkgaGF2ZSB0byBiZSBzYXZlZCBpbiB0aGUgbW9kZWwuCiNJZiB1c2luZyBjdXN0b20gbGF5ZXIgaW4ga2VyYXMsIHVzZSBuYXRpdmUgc2F2ZSBmdW5jdGlvbmFsaXR5IGZyb20ga2VyYXMuCgojICMgVHJhbnNmb3JtYXRpb24gbG9hZAoKIyBJblsgXToKCgpmcm9tIE5vdGVib29rLkRTTm90ZWJvb2suTm90ZWJvb2tFeGVjdXRvciBpbXBvcnQgTm90ZWJvb2tFeGVjdXRvcgpuYiA9IE5vdGVib29rRXhlY3V0b3IoKQpsb2FkZWRfbW9kZWwgPSBuYi5sb2FkX21vZGVsKCcxNzE3MTY5Mjc3Mzc3MTAxMicpCgojICMgVHJhbnNmb3JtaW5nIHRyYWluZyBkYXRhCgojIEluWyBdOgoKCmxvYWRlZF9tb2RlbC50cmFuc2Zvcm0oWF90cmFpbikK\"}","sandboxService":[],"notebookContent":"{\"nbformat_minor\":2,\"metadata\":{},\"cells\":[{\"outputs\":[],\"metadata\":{\"id\":\"11730976_0.392308708434143\"},\"execution_count\":null,\"source\":[\"def sample_func():\\n    #sklearn train model new_V5\\n    import pandas\\n    from sklearn  import model_selection\\n    from sklearn.linear_model import LogisticRegression\\n    from sklearn.naive_bayes import GaussianNB\\n    from sklearn.naive_bayes import MultinomialNB\\n    import pickle as pkle\\n    url = \\\"https://raw.githubusercontent.com/jbrownlee/Datasets/master/pima-indians-diabetes.data.csv\\\"\\n    names = ['preg', 'plas', 'pres', 'skin', 'test', 'mass', 'pedi', 'age', 'class']\\n    dataframe = pandas.read_csv(url, names=names)\\n    array = dataframe.values\\n    X = array[:,0:8]\\n    Y = array[:,8]\\n    test_size = 0.33\\n    seed = 7\\n    X_train, X_test, Y_train, Y_test = model_selection.train_test_split(X, Y, test_size=test_size, random_state=seed)\\n    model = MultinomialNB()\\n    model.fit(X_train, Y_train);\\n    return dataframe\"],\"cell_type\":\"code\"}],\"nbformat\":4}","secrets":"{\"reserv1\":null,\"reserv2\":null,\"reserv3\":null,\"reserv4\":null,\"reserv5\":null,\"createdDate\":null,\"isActive\":0,\"lastUpdatedDate\":null,\"active\":1,\"migrationId\":null,\"id\":5537798,\"type\":\"210\",\"status\":1,\"spaceKey\":\"1156\",\"settings\":\"[]\"}","dataSource":[],"notebook":"{\"migrationId\":null,\"id\":11730976,\"projectId\":1474560,\"spaceKey\":\"1156\",\"notebookName\":\"SampleScript\",\"data\":\"{\\\"datasets\\\":[],\\\"uncheckeddatasets\\\":[],\\\"kernalID\\\":\\\"\\\",\\\"Algorithms\\\":[],\\\"isScheduled\\\":0,\\\"filename\\\":\\\"SampleScript.ipynb\\\",\\\"last_modified_date\\\":\\\"2023-10-27T04:50:32.000+00:00\\\"}\",\"description\":null,\"createdDate\":1698387611656,\"lastUpdatedDate\":1698387611659,\"createdBy\":950278,\"updatedBy\":950278,\"status\":1,\"committedBy\":950278,\"lastcommittedDate\":1698387611656,\"isShared\":null,\"customComponentscript\":null,\"type\":1,\"isScheduled\":null,\"isImported\":1,\"uuid\":\"11561698387611658\"}","preparation":[]}}